(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1312:function(e,t,a){"use strict";a.r(t);a(166);var r=a(107),n=a(11),o=a.n(n),c=a(22),i=a(8),l=a(14),s=a(9),u=a(7),f=a(773),m=a(10),d=a(16),p=a(56),b=a(778),h=a(269),y=a(0),v=a(29),k=a(21),E=a(772),_=a(770),g=(a(131),a(43)),O=(a(97),a(50)),C=a(88),j=a(849),S=a(266),x=a(780),N=a(804),w=a(196),D=a(835),L=a(776),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={btnDisabled:!1,countChecked:0,hasDocument:!1,proof:void 0,proofBase64:void 0,proofChecked:!1,proofError:!1,proofValidated:!1},a.proofRef=y.createRef(),a.handleProofChange=a.proofChange.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.submit.bind(Object(d.a)(Object(d.a)(a))),a.handleLater=a.later.bind(Object(d.a)(Object(d.a)(a))),a.handleBur=a.blur.bind(Object(d.a)(Object(d.a)(a))),a.handleCheckChange=a.checkChange.bind(Object(d.a)(Object(d.a)(a))),a.handleCancelProof=a.cancelProof.bind(Object(d.a)(Object(d.a)(a))),a.handleValidateProof=a.validateProof.bind(Object(d.a)(Object(d.a)(a))),a.handleProofRemove=a.proofRemove.bind(Object(d.a)(Object(d.a)(a))),a.handleProofCancel=a.proofCancel.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a=!1,r=e.beneficiary;return t.proof||r&&r.documents&&r.documents.rows&&r.documents.rows.map(function(e){e.documentStatus===x.a.CANCELED||9!==e.documentTypeId&&17!==e.documentTypeId&&15!==e.documentTypeId||(a=!0)}),{hasDocument:a}}}]),Object(l.a)(t,[{key:"blur",value:function(){var e=this.props,t=e.updateValues,a=e.form;t&&t(a.getFieldsValue())}},{key:"cancelProof",value:function(){this.setState({countChecked:0,proof:void 0,proofBase64:void 0,proofChecked:!1,proofError:!1,proofValidated:!1}),this.proofRef.current.onRemove()}},{key:"validateProof",value:function(){this.setState({proofValidated:!0})}},{key:"checkChange",value:function(e){var t=e.target.checked?this.state.countChecked+1:this.state.countChecked-1;this.setState({countChecked:t,proofChecked:5===t})}},{key:"proofChange",value:function(e,t){this.setState({countChecked:0,proof:e,proofBase64:t,proofChecked:!1,proofError:!1,proofValidated:!1})}},{key:"proofRemove",value:function(){this.setState({countChecked:0,proof:void 0,proofBase64:void 0,proofChecked:!1,proofError:!1,proofValidated:!1})}},{key:"proofCancel",value:function(e){this.props.onRemoveDocument&&this.props.onRemoveDocument(e)}},{key:"getBeneficiary",value:function(e){var t=this.state.proof,a={birthCountry:e.birthCountry,birthday:e.birthday?Object(w.e)(e.birthday):"",firstname:e.firstname,lastname:e.lastname,nationality:e.nationality,phone:e.phone,placeOfBirth:e.placeOfBirth,title:e.title};return t&&(a.documents=[{documentTypeId:e.form_proof_id?parseInt(e.form_proof_id,10):9,file:t,name:t&&t.name,userId:e.userId}]),a}},{key:"later",value:function(){var e=this.props.form.getFieldsValue();e.firstname?this.props.onSave&&this.props.onSave(!1,this.getBeneficiary(e)):null!==e.birthCountry||null!==e.birthday||null!==e.form_proof_id||null!==e.lastname||null!==e.nationality||null!==e.phone||null!==e.placeOfBirth?this.props.form.setFields({firstname:{errors:[new Error(this.props.intl.formatMessage({id:"kyc.beneficiary.form_firstname_error"}))],value:e.firstname}}):this.props.onSave&&this.props.onSave(!1)}},{key:"submit",value:function(){var e=this,t=this.props.kycSetState;t({btnLoading:!0}),this.props.form.validateFields(function(){var a=Object(c.a)(o.a.mark(function a(r,n){var c,i,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r){a.next=11;break}if(c=e.getBeneficiary(n),i=e.state.proof,l=e.state.hasDocument,i||l){a.next=8;break}return t({btnLoading:!1}),e.setState({proofError:!0}),a.abrupt("return",!1);case 8:e.props.onSave&&e.props.onSave(!0,c),a.next=12;break;case 11:t({btnLoading:!1});case 12:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.offValidateStep,a=e.offValidateLater;t&&t(this.handleSubmit),a&&a(this.handleLater)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.onValidateStep,a=e.onValidateLater;t&&t(this.handleSubmit),a&&a(this.handleLater)}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.intl,n=e.beneficiary,o=e.className,c=e.isCurrent,i=this.state,l=i.proofValidated,s=(i.proof,i.proofChecked),u=i.proofBase64;return y.createElement(r.a,{method:"#",className:o,onSubmit:this.handleSubmit},y.createElement(O.a,null,y.createElement("div",{className:"kyc-subtitle"},y.createElement(k.b,{id:"kyc.personal_information.main_informations"}))),y.createElement("br",null),y.createElement(S.i,{defaultValue:n?n.title:x.b.M,form:t,id:"title",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_title_error"}),required:!0}],values:[{label:y.createElement(k.b,{id:"kyc.beneficiary.form_man"}),value:x.b.M},{label:y.createElement(k.b,{id:"kyc.beneficiary.form_woman"}),value:x.b.MME}]}),y.createElement(O.a,{gutter:55},y.createElement(g.a,{className:"gutter-box",span:8},y.createElement(S.o,{onBlur:this.handleBur,defaultValue:n&&n.firstname,form:t,label:y.createElement(k.b,{id:"kyc.beneficiary.form_firstname"}),id:"firstname",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_firstname_error"}),required:!0}]})),y.createElement(g.a,{className:"gutter-box",span:8},y.createElement(S.o,{onBlur:this.handleBur,defaultValue:n&&n.lastname,form:t,label:y.createElement(k.b,{id:"kyc.beneficiary.form_lastname"}),id:"lastname",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_lastname_error"}),required:!0}]})),c&&y.createElement(g.a,{className:"gutter-box",span:8},y.createElement(S.o,{onBlur:this.handleBur,defaultValue:n&&n.phone,form:t,label:y.createElement(k.b,{id:"kyc.beneficiary.form_phone"}),id:"phone",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_phone_error"}),required:!0}]}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{className:"gutter-box",span:16},y.createElement(S.c,{onBlur:this.handleBur,iso:!0,id:"nationality",form:t,defaultValue:n&&n.nationality,title:"kyc.beneficiary.form_nationality",error:"kyc.beneficiary.form_nationality_error"}))),y.createElement(O.a,null,y.createElement("div",{className:"kyc-subtitle"},y.createElement(k.b,{id:"kyc.personal_information.birth_informations"}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{className:"gutter-box",span:8},y.createElement(S.d,{onBlur:this.handleBur,defaultValue:n&&n.birthday&&n.birthday?Object(w.d)(n.birthday):null,form:t,label:y.createElement(k.b,{id:"kyc.beneficiary.form_birthday"}),id:"birthday",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_birthday_error"}),required:!0}]})),y.createElement(g.a,{className:"gutter-box",span:8},y.createElement(S.c,{onBlur:this.handleBur,iso:!0,id:"birthCountry",form:t,defaultValue:n&&n.birthCountry,title:"kyc.beneficiary.form_birth_country",error:"kyc.beneficiary.form_birth_country_error"}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{className:"gutter-box",span:16},y.createElement(S.o,{onBlur:this.handleBur,defaultValue:n&&n.placeOfBirth,form:t,label:y.createElement(k.b,{id:"kyc.beneficiary.form_city"}),id:"placeOfBirth",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_city_error"}),required:!0}]}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{span:16},y.createElement(D.a,{ref:this.proofRef,documents:n&&n.documents.rows,documentsType:[9,17,15],hasError:this.state.proofError,onChange:this.handleProofChange,onRemove:this.handleProofRemove,onCancel:this.handleProofCancel,title:"kyc.beneficiary.form_btn_upload_proof_id",errorText:"kyc.beneficiary.form_btn_upload_proof_id_error"},y.createElement(S.k,{defaultValue:"",showSearch:!0,id:"form_proof_id",label:y.createElement(k.b,{id:"kyc.beneficiary.form_proof_id_type"}),rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_proof_id_type_error"}),required:!0}],form:t,options:[y.createElement(S.g,{value:"",key:"1"},"\xa0"),y.createElement(S.g,{value:"9",key:"9"},y.createElement(k.b,{id:"kyc.beneficiary.form_proof_id_type_1"})),y.createElement(S.g,{value:"17",key:"17"},y.createElement(k.b,{id:"kyc.beneficiary.form_proof_id_type_2"})),y.createElement(S.g,{value:"15",key:"15"},y.createElement(k.b,{id:"kyc.beneficiary.form_proof_id_type_3"}))]})),u&&y.createElement(j.a,{visible:!l,closable:!1,footerVisible:!1,className:"quality-assurance-dialog"},y.createElement("div",{className:"quality-assurance-preview"},y.createElement("div",{className:"quality-assurance-form"},y.createElement("div",{className:"quality-assurance-title"},y.createElement(k.b,{id:"kyc.beneficiary.quality_title"})),y.createElement(S.a,{onCheck:this.handleCheckChange,id:"quality-assurance-checkbox-1",label:y.createElement(k.b,{id:"kyc.beneficiary.quality_assurance_checkbox_1"}),form:t}),y.createElement(S.a,{onCheck:this.handleCheckChange,id:"quality-assurance-checkbox-2",label:y.createElement(k.b,{id:"kyc.beneficiary.quality_assurance_checkbox_2"}),form:t}),y.createElement(S.a,{onCheck:this.handleCheckChange,id:"quality-assurance-checkbox-3",label:y.createElement(k.b,{id:"kyc.beneficiary.quality_assurance_checkbox_3"}),form:t}),y.createElement(S.a,{onCheck:this.handleCheckChange,id:"quality-assurance-checkbox-4",label:y.createElement(k.b,{id:"kyc.beneficiary.quality_assurance_checkbox_4"}),form:t}),y.createElement(S.a,{onCheck:this.handleCheckChange,id:"quality-assurance-checkbox-5",label:y.createElement(k.b,{id:"kyc.beneficiary.quality_assurance_checkbox_5"}),form:t}),y.createElement(C.c,{onClick:this.handleCancelProof,type:C.b.Default},y.createElement(k.b,{id:"kyc.beneficiary.quality_assurance_cancel"})),y.createElement(C.c,{disabled:!s,onClick:this.handleValidateProof,type:C.b.Primary},y.createElement(k.b,{id:"kyc.beneficiary.quality_assurance_valid"}))),y.createElement("div",{className:"preview-content"},u.indexOf("data:application/pdf;base64")>-1?y.createElement(N.a,{file:u}):y.createElement("img",{src:u}))))),y.createElement(g.a,{span:8,className:"onboarding-form-hint"},y.createElement("div",{className:"kyc-hint-title"},y.createElement(k.b,{id:"kyc.beneficiary.hint_title"})),y.createElement("div",{className:"kyc-hint-description"},y.createElement(k.a,{id:"kyc.beneficiary.hint_proof_id"})))))}}]),t}(y.PureComponent),V=Object(v.compose)(r.a.create({}),k.e,E.b(),L.b())(P),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={btnDisabled:!1,btnLoading:!1},a.handleSubmit=a.submit.bind(Object(d.a)(Object(d.a)(a))),a.handleRemoveDocument=a.removeDocument.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"removeDocument",value:function(e){var t=this.props.removeDocument;t&&t(e)}},{key:"later",value:function(){var e=Object(c.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"submit",value:function(){var e=Object(c.a)(o.a.mark(function e(a,r){var n,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a||Object(f.a)(Object(u.a)(t.prototype),"later",this).call(this),n=this.props,c=n.saveBeneficiary,n.tempBeneficiary,n.kycSetState,!c||!r){e.next=5;break}return e.next=5,c(r);case 5:a&&this.save();case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this.props,t=e.currentStep,a=(e.nextStep,e.baseUrl),r=e.kycSetState;r&&r({bottomBar:!0,btn:"kyc.bottom.confirm",btnLater:"kyc.bottom.later",btnLaterLink:"/",btnLink:"".concat(a,"/part-2"),nextStep:"".concat(t,"_PART_2"),step:"".concat(t,"_PART_1")})}},{key:"render",value:function(){var e=this.props,a=e.tempBeneficiary,r=e.values,n=e.location,o=e.isCurrent,c=(e.baseUrl,n.pathname.replace(/\//g,".").replace(/-/g,"_").substr(1));return Object(f.a)(Object(u.a)(t.prototype),"_render",this).call(this,y.createElement("div",{className:"kyc-personal-info-1"},y.createElement("div",null,y.createElement(p.f,{titleVariables:{firstname:r.firstname||"",lastname:r.lastname||""},title:r.firstname||r.lastname?"".concat(c,"_title"):"".concat(c,"_title_empty"),description:"".concat(c,"_description")})),y.createElement(V,{isCurrent:o,onSave:this.handleSubmit,onRemoveDocument:this.handleRemoveDocument,beneficiary:a})))}}]),t}(_.a);B.defaultProps={};t.default=Object(v.compose)(b.b(),r.a.create({}),h.c(),E.b(),L.b(),k.e)(B)},770:function(e,t,a){"use strict";var r=a(11),n=a.n(r),o=a(22),c=a(8),i=a(14),l=a(9),s=a(7),u=a(10),f=a(16),m=a(56),d=a(0),p=a(62),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a.handleLater=a.later.bind(Object(f.a)(Object(f.a)(a))),a.handleSave=a.save.bind(Object(f.a)(Object(f.a)(a))),a.handleError=a.onError.bind(Object(f.a)(Object(f.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"load",value:function(){this.props.kycSetState&&this.props.kycSetState({btnLoading:!0})}},{key:"later",value:function(){var e=Object(o.a)(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.props.kyc.btnLaterLink)&&p.a.push(t),e.abrupt("return",!0);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onError",value:function(){var e=Object(o.a)(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.kycSetState&&this.props.kycSetState({btnLaterLoading:!1,btnLoading:!1});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(o.a)(n.a.mark(function e(){var t,a,r,o,c,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.company,r=t.kycSetState,o=t.kyc,c=o.nextStep,i=o.btnLink,r({btnLoading:!0}),!c||!a){e.next=5;break}return e.next=5,a.step(c);case 5:return r({btnLoading:!1}),i&&p.a.push(i),e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.offValidateStep,a=e.offValidateLater;t&&t(this.handleSave),a&&a(this.handleLater)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.onValidateStep,a=e.onValidateLater;t&&t(this.handleSave),a&&a(this.handleLater),this.props.kycSetState&&this.props.kycSetState(this.props.kycProps)}},{key:"_render",value:function(e){var t=this.props,a=t.kycProps,r=t.user,n=r&&r.data&&r.data.me,o=n&&n.currentCompany&&(n.currentCompany.name||n.currentCompany.brandName),c=a&&a.headingTitle,i=a&&a.headingDescription;return d.createElement("div",{className:"kyc-children"},c&&d.createElement("div",null,d.createElement(m.f,{titleVariables:{company:o},title:c,description:i})),e)}}]),t}(d.PureComponent);b.defaultProps={},t.a=b},773:function(e,t,a){"use strict";var r=a(7);function n(e,t,a){return(n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}a.d(t,"a",function(){return n})},780:function(e,t,a){"use strict";var r,n;a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n}),function(e){e.PENDING="PENDING",e.CANCELED="CANCELED",e.VALIDATED="VALIDATED"}(r||(r={})),function(e){e.M="M",e.MME="MME",e.MLLE="MLLE"}(n||(n={}))},792:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=792},805:function(e,t,a){},807:function(e,t,a){"use strict";var r=a(57),n=a(11),o=a.n(n),c=a(22),i=a(271),l=a(30),s=a(28),u=a(270),f=a(0),m=a(272),d=a(21),p=a(804),b=(a(808),f.useState);t.a=function(e){var t=e.onChange,a=e.onRemove,n=e.defaultPreview,h=e.hasError,y=e.errorText,v=e.title,k=b(void 0),E=Object(i.a)(k,2),_=E[0],g=E[1],O=b(n),C=Object(i.a)(O,2),j=C[0],S=C[1],x=function(){return{abort:function(){}}},N=function(){var e=Object(c.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(o.a.mark(function e(a){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FileReader).readAsDataURL(a),r.onloadend=function(){S(r.result),g(a),t&&t(a,r.result)};case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(c.a)(o.a.mark(function e(t,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(t),e.abrupt("return",!1);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),L=function(){"undefined"!==typeof _&&a&&a(_.uid),S(void 0),g(void 0)};return f.createElement("div",{className:"local-upload-outer ".concat(h?" has-error":"")},f.createElement(m.a,{maxSize:1e7,accept:"image/jpeg, image/jpg, image/png, application/pdf, image/bmp, image/gif, image/png",onDrop:function(){},onDropAccepted:N},function(e){var t=e.getRootProps,a=e.isDragActive;return Object(r.a)(e,["getRootProps","isDragActive"]),f.createElement("div",Object.assign({},t({}),{className:"local-upload-wrapper active".concat(h?" has-error":"").concat(a?" upload-visible":"upload-hidden")}),j?f.createElement("div",{className:"local-upload-preview"},f.createElement(l.a,{onClick:L,className:"local-upload-preview-close",value:s.a.Cross}),f.createElement("div",{className:"preview-content"},j.indexOf("data:application/pdf;base64")>-1?f.createElement(p.a,{file:j}):f.createElement("img",{src:j}))):f.createElement(u.a,{active:!0,small:!0,multiple:!1,title:v,extension:"kyc.beneficiary.upload_extension",onCustomRequest:x,onBeforeUpload:D}))}),f.createElement("div",{className:"ant-form-explain"},h&&y&&f.createElement(d.b,{id:y})))}},808:function(e,t,a){},823:function(e,t){},824:function(e,t){},825:function(e,t){},826:function(e,t){},827:function(e,t){},835:function(e,t,a){"use strict";var r=a(57),n=a(8),o=a(14),c=a(9),i=a(7),l=a(10),s=a(30),u=a(28),f=a(807),m=a(780),d=a(0),p=(a(805),function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hasError,a=e.documents,n=e.onCancel,o=e.documentsType,c=e.children,i=e.childrenAfter,l=Object(r.a)(e,["hasError","documents","onCancel","documentsType","children","childrenAfter"]),p=[];return a&&a.map(function(e,t){o&&e.documentTypeId&&e.documentStatus!==m.a.CANCELED&&o.indexOf(e.documentTypeId)>-1&&p.push(e)}),d.createElement("div",{className:"proof-outer ".concat(t?" has-error":"")},p.map(function(e,t){return d.createElement("div",{className:"document-proof",key:"".concat(t)},e.documentStatus===m.a.PENDING&&d.createElement(s.a,{value:u.a.Clock}),e.documentStatus===m.a.VALIDATED&&d.createElement(s.a,{value:u.a.Checkmark}),e.fileName,d.createElement("div",{onClick:n&&n.bind(null,e.documentId),className:"document-proof-remove"},d.createElement(s.a,{value:u.a.Cross})))}),!p||0===p.length&&d.createElement(d.Fragment,null,!i&&c,d.createElement(f.a,Object.assign({hasError:t},l)),i&&c))}}]),t}(d.PureComponent));p.defaultProps={},t.a=p}}]);
//# sourceMappingURL=14.23a7e409.chunk.js.map