(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1243:function(e,t,n){"use strict";var a=function(e,t,n){e.splice(n<0?e.length+n:n,0,e.splice(t,1)[0])},r=function(e,t,n){return e=e.slice(),a(e,t,n),e};e.exports=r,e.exports.default=r,e.exports.mutate=a},1245:function(e,t,n){},1299:function(e,t,n){"use strict";n.r(t);n(131);var a=n(43),r=(n(97),n(50)),c=n(8),i=n(14),o=n(9),u=n(7),s=n(10),l=n(28),d=n(108),p=n(57),f=n(11),m=n.n(f),b=n(22),v=n(24),h=n(44),O=n(16),g=n(1243),E=n.n(g),y=n(30),j=n(771),C=n(812),A=n(0),w=n(955),N=n.n(w),k=n(21),x=(n(901),n(234)),P=n(943),R=n.n(P),D=n(266),_=n(29),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={edit:!1,value:void 0},n.handleBlur=n.blur.bind(Object(O.a)(Object(O.a)(n))),n.handleFocus=n.focus.bind(Object(O.a)(Object(O.a)(n))),n.handleOnClick=n.onClick.bind(Object(O.a)(Object(O.a)(n))),n.handleChange=n.change.bind(Object(O.a)(Object(O.a)(n))),n.handleInputRef=n.inputRef.bind(Object(O.a)(Object(O.a)(n))),n}return Object(s.a)(t,e),Object(i.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return"undefined"===typeof t.value||null===t.value||e.value!==t.defaultValue?{defaultValue:e.value,value:e.value}:null}}]),Object(i.a)(t,[{key:"inputRef",value:function(e){Element}},{key:"blur",value:function(){this.setState({edit:!1}),this.state.value!==this.props.value&&this.props.onChange&&this.props.onChange(this.state.value)}},{key:"focus",value:function(){this.setState({edit:!0})}},{key:"onClick",value:function(){this.setState({edit:!0})}},{key:"change",value:function(e){this.setState({value:e.currentTarget.value})}},{key:"render",value:function(){var e=this.props,t=(e.placeholder,e.form),n=e.isNew,a=e.maxLength,r=e.editable,c=this.state,i=c.value,o=c.edit;return A.createElement("div",{className:"tag-manager-row-editable ".concat(o?"visible":"hidden")},r&&A.createElement(D.o,{maxLength:a,autoFocus:n,ref:this.handleInputRef,defaultValue:"string"===typeof i?i:"",onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange,small:!0,marge:!1,form:t}),A.createElement("span",{className:"tag-manager-row-value"},i))}}]),t}(A.PureComponent),L=Object(_.compose)(R.a.create({}))(U),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={},n.handleChange=n.update.bind(Object(O.a)(Object(O.a)(n))),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"update",value:function(){var e=Object(b.a)(m.a.mark(function e(t,n){var a,r,c,i,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,a.isNew,r=a.label,c=a.accounting,i=Object(p.a)(a,["isNew","label","accounting"]),!1===(o=Object(v.a)({},{description:i.description||"",enabled:i.enabled,id:i.id,key:"string"===typeof r?r:"",order:i.order,type:i.type,value:"string"===typeof i.value?i.value:""},Object(x.a)({},t,n))).enabled&&(o.order=-1),!(c&&c.createOrUpdateAccountingPreferences&&i.type)){e.next=6;break}return e.next=6,c.createOrUpdateAccountingPreferences([o],i.type);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.id,n=e.label,c=e.value,i=e.description,o=e.enabled,u=e.className,s=e.isNew,d=e.editDescription,p=e.editLabel,f=e.editValue,m=e.hasDescription,b=e.remove,v=e.reorder;return A.createElement(r.a,Object.assign({id:t},{className:"tag-manager-row ".concat(u?" ".concat(u):""," ").concat(o?"":" hidden"),type:"flex"}),A.createElement(a.a,{className:"".concat(v?"drag draggable":"no-drag")},v&&A.createElement(y.a,{value:l.a.Menu})),A.createElement(a.a,{className:"label"},A.createElement(L,{editable:p,maxLength:100,onChange:this.handleChange.bind(null,"key"),isNew:s,value:n})),A.createElement(a.a,{className:"value"},A.createElement(L,{editable:f,maxLength:100,onChange:this.handleChange.bind(null,"value"),value:c})),m&&A.createElement(a.a,{className:"description"},A.createElement(L,{editable:d,maxLength:150,onChange:this.handleChange.bind(null,"description"),value:i})),A.createElement(a.a,{onClick:b&&t?this.handleChange.bind(null,"enabled",!1):void 0,className:"remove"},b&&t&&A.createElement(y.a,{value:l.a.Trash})))}}]),t}(A.PureComponent),S=C.c()(T),B=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={rows:void 0},n.onAdd=Object(b.a)(m.a.mark(function e(){var t,a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.type,!(r=t.accounting)||!r.createOrUpdateAccountingPreferences){e.next=4;break}return e.next=4,r.createOrUpdateAccountingPreferences([{description:"",enabled:!0,key:"",order:(n.state.rows||[]).length,type:a,value:""}],a);case 4:case"end":return e.stop()}},e)})),n.handleDndRef=n.dndRef.bind(Object(O.a)(Object(O.a)(n))),n.handleOnAdd=n.onAdd.bind(Object(O.a)(Object(O.a)(n))),n}return Object(s.a)(t,e),Object(i.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){if(t.originalRows!==e.rows&&e.rows.length>0){var n=!!(t.originalRows&&t.originalRows.length<e.rows.length),a=e.rows.slice(0).sort(function(e,t){return"undefined"===typeof e.order||null===e.order||"undefined"===typeof t.order||null===t.order?0:e.order>t.order?1:-1});if(n){var r=a.pop();a=[].concat(Object(h.a)(a),[Object(v.a)({},r,{isNew:!0})])}return{originalRows:e.rows,rows:a}}return null}}]),Object(i.a)(t,[{key:"dndRef",value:function(e){var t=this;if(e){this.drake=N()([e],{accepts:function(e,t,n,a){return!0},copy:!1,copySortSource:!1,direction:"vertical",ignoreInputTextSelection:!0,invalid:function(e,t){return!1},isContainer:function(e){return!1},mirrorContainer:document.body,moves:function(e,t,n,a){return n.classList.contains("draggable")},removeOnSpill:!1,revertOnSpill:!1});var n=0;this.drake.on("drag",function(e,t){n=Object(h.a)(t.children).indexOf(e)}),this.drake.on("drop",function(){var e=Object(b.a)(m.a.mark(function e(a,r,c,i){var o,u,s,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.props.accounting,u=Object(h.a)(r.children).indexOf(a),s=(t.state.rows||[]).slice(0),"undefined"===typeof n||"undefined"===typeof u){e.next=10;break}if(s=E()(s,n,u),l=0,s=s.map(function(e){return{description:"string"===typeof e.description?"".concat(e.description):"",enabled:e.enabled,id:e.id,key:e.key||"",order:e.enabled?l++:-1,type:e.type,value:"string"===typeof e.value?"".concat(e.value):""}}),!o||!o.createOrUpdateAccountingPreferences){e.next=10;break}return e.next=10,o.createOrUpdateAccountingPreferences(s,t.props.type);case 10:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}())}}},{key:"componentWillUnmount",value:function(){this.drake&&this.drake.destroy()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.type,a=e.add,r=e.editDescription,c=e.editLabel,i=e.editValue,o=e.hasDescription,u=e.remove,s=e.reorder,d=this.state.rows||[];return A.createElement("div",{className:"tag-manager"},A.createElement(j.a,{title:t&&A.createElement(k.b,{id:t}),center:!0,shadow:!0},A.createElement(S,{className:"tag-manager-header",enabled:!0,editDescription:!1,editLabel:!1,editValue:!1,hasDescription:!0,remove:!1,reorder:!1,type:n,label:A.createElement(k.b,{id:"accounting_options.thead.label"}),description:A.createElement(k.b,{id:"accounting_options.thead.description"}),value:A.createElement(k.b,{id:"accounting_options.thead.account"})}),A.createElement("div",{style:{width:"100%"},ref:this.handleDndRef},d.map(function(e,t){var a=e.key,l=(e.order,Object(p.a)(e,["key","order"]));return e.enabled?A.createElement(S,Object.assign({editDescription:r,editLabel:c,editValue:i,hasDescription:o,remove:u,reorder:s},{type:n,key:"".concat(t),order:t},Object(v.a)({},l,{label:a}))):null})),a&&A.createElement("div",{onClick:this.handleOnAdd,className:"tag-manager-row-add"},A.createElement(y.a,{value:l.a.Plus}))))}}]),t}(A.PureComponent);B.defaultProps={add:!1,editDescription:!1,editLabel:!1,editValue:!1,hasDescription:!1,remove:!1};var V=C.c()(B),G=n(56),q=n(892),K=(n(1245),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e={};return e.LEDGER={common:!1,editDescription:!0,editValue:!0,reorder:!1,types:[q.a.LEDGER_BANK,q.a.LEDGER_PURCHASE,q.a.LEDGER_SALES,q.a.LEDGER_MISC]},e.BANK_ACCOUNT={common:!1,editDescription:!0,editLabel:!0,editValue:!0,hasDescription:!0,reorder:!1,types:[q.a.BANK_ACCOUNT,q.a.BANK_ACCOUNT_TREEZOR]},e.PURCHASE_ACCOUNT={add:!0,common:!1,editDescription:!0,editLabel:!0,editValue:!0,hasDescription:!0,remove:!0,reorder:!0,types:[q.a.PURCHASE_ACCOUNT]},e.VAT_ACCOUNT={add:!1,common:!1,editDescription:!0,editLabel:!0,editValue:!0,hasDescription:!0,remove:!1,reorder:!1,types:[q.a.VAT_ACCOUNT]},A.createElement(d.b,null,A.createElement(r.a,{type:"flex"},A.createElement(G.f,{icon:l.a.Tag,title:"accounting_options.header.title",description:"accounting_options.header.description"})),Object.keys(e).map(function(t,n){return A.createElement(r.a,{key:"".concat(n),type:"flex",style:{marginBottom:30}},A.createElement(a.a,{span:24},A.createElement(C.b,{common:e[t].common,types:e[t].types},A.createElement(C.a,null,function(n){var a=n.accounting,r=a&&a.preferences&&a.preferences.rows||[];return A.createElement(V,Object.assign({add:e[t].add,editDescription:e[t].editDescription,editLabel:e[t].editLabel,editValue:e[t].editValue,hasDescription:e[t].hasDescription,remove:e[t].remove,reorder:e[t].reorder},{type:t,rows:r,title:"accounting_options.".concat(t.toLowerCase(),".title")}))}))))}))}}]),t}(A.PureComponent));t.default=K},765:function(e,t,n){"use strict";n(331);var a=n(247),r=(n(330),n(167)),c=n(57),i=n(8),o=n(14),u=n(9),s=n(7),l=n(10),d=n(30),p=n(28),f=n(0),m=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).onRemove=function(e){e.stopPropagation(),e.preventDefault();var t=n.props.onRemove;t&&t()},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.avatar,n=e.center,i=e.children,o=e.className,u=e.onClose,s=e.editable,l=e.onEdit,m=e.removable,b=e.shadow,v=e.title,h=e.primary,O=e.titleAlign,g=Object(c.a)(e,["avatar","center","children","className","onClose","editable","onEdit","removable","shadow","title","primary","titleAlign"]);return f.createElement(a.a,Object.assign({className:"card-item".concat(n?" center ":"").concat(b?" shadow ":"").concat(h?" primary ":"").concat(o?" ".concat(o):"")},g),u&&f.createElement("div",{onClick:u,className:"card-close"},f.createElement(d.a,{value:p.a.Cross})),s&&f.createElement("div",{onClick:l,className:"card-edit"},f.createElement(d.a,{value:p.a.Pencil})),m&&f.createElement("div",{onClick:this.onRemove,className:"card-remove"},f.createElement(d.a,{value:p.a.Trash})),t&&f.createElement(r.a,{className:"card-avatar"},t),v&&f.createElement("div",{className:"card-title".concat(O?" ".concat(O):"")},v),f.createElement("div",{className:"card-children"},i))}}]),t}(f.PureComponent);t.a=m},768:function(e,t,n){"use strict";var a=n(30),r=n(246),c=n(0),i=n(21),o=n(765);t.a=function(e){var t=e.className,n=e.center,u=e.title,s=e.description,l=e.icon,d=e.style,p=e.loading,f=e.color;return c.createElement(o.a,{style:d,center:n,className:"condensed-card".concat(t?" ".concat(t):""),shadow:!0},c.createElement("div",{className:"condensed-card-left"},c.createElement(r.a.Bloc,{loading:Boolean(p),className:"condensed-card-title"},u),s&&c.createElement(r.a.Bloc,{loading:Boolean(p),className:"condensed-card-description"},c.createElement(i.b,{id:s}))),c.createElement("div",{className:"condensed-card-right".concat(f?" ".concat(f):"")},c.createElement(a.a,{value:l})))}},769:function(e,t,n){"use strict";n(97);var a=n(50),r=(n(131),n(43)),c=n(8),i=n(14),o=n(9),u=n(7),s=n(10),l=n(0),d=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.title,c=e.rows,i=e.renderRow;return l.createElement(a.a,{className:"".concat(t?"className ":"")},l.createElement("div",{className:"card-row-title"},n),c&&c.map(function(e,t){return l.createElement(r.a,{className:"card-row-item",key:"".concat(t)},i?i(e):e)}))}}]),t}(l.PureComponent);t.a=d},771:function(e,t,n){"use strict";n(774);var a=n(765);n.d(t,"a",function(){return a.a});var r=n(768);n.d(t,"c",function(){return r.a});var c=n(769);n.d(t,"b",function(){return c.a})},774:function(e,t,n){},812:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(22),i=n(0),o=i.createContext({accounting:{accountingExports:void 0,createOrUpdateAccountingPreferences:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),export:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),preferences:void 0}}),u=o.Provider,s=o.Consumer,l=n(8),d=n(14),p=n(9),f=n(7),m=n(10),b=(n(106),function(){return function(e){return function(t){function n(){return Object(l.a)(this,n),Object(p.a)(this,Object(f.a)(n).apply(this,arguments))}return Object(m.a)(n,t),Object(d.a)(n,[{key:"render",value:function(){var t=this;return i.createElement(s,null,function(n){return i.createElement(e,Object.assign({},t.props,n))})}}]),n}(i.Component)}}),v=n(24),h=n(51),O=n(29),g=n(41),E=n(31),y=n(32),j=n.n(y),C=n(45);function A(){var e=Object(E.a)(["\nfragment accountingPreference on AccountingPreference {\n  ","\n}"]);return A=function(){return e},e}function w(){var e=Object(E.a)(["\nfragment export on Export {\n  ","\n}"]);return w=function(){return e},e}var N=j()(w(),"\n  id\n  fileLink\n  enabled\n  createdAt\n  updatedAt\n"),k="\n  ...export\n  company {\n    ".concat(C.a.standalone,"\n  }\n"),x={accounting:{fragment:j()(A(),"\n  id\n  key\n  value\n  description\n  type\n  order\n  enabled\n  createdAt\n  updatedAt\n  company {\n    id\n  }\n"),query:"\n  ...accountingPreference\n"},accountingExport:{fragment:N,query:k}};function P(){var e=Object(E.a)(["\n  mutation {\n    export\n  }\n"]);return P=function(){return e},e}function R(){var e=Object(E.a)(["\n  ","\n\n  query exports($limit: Int, $offset: Int) {\n    exports(limit: $limit, offset: $offset) {\n      total\n      rows {\n        ","\n      }\n    }\n  }\n"]);return R=function(){return e},e}function D(){var e=Object(E.a)(["\n  ","\n\n  query accountingPreferences($types: [AccountingPreferenceType], $default: Boolean) {\n    accountingPreferences(types: $types, default: $default) {\n      total\n      rows {\n        ","\n      }\n    }\n  }\n"]);return D=function(){return e},e}function _(){var e=Object(E.a)(["\n  ","\n\n  mutation createOrUpdateAccountingPreferences($input: [AccountingPreferenceInput!]!) {\n    createOrUpdateAccountingPreferences(input: $input) {\n      total\n      rows {\n        ","\n      }\n    }\n  }\n"]);return _=function(){return e},e}var U=j()(_(),x.accounting.fragment,x.accounting.query),L=j()(D(),x.accounting.fragment,x.accounting.query),T=j()(R(),x.accountingExport.fragment,x.accountingExport.query),S=j()(P()),B=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={accounting:{accountingExports:void 0,createOrUpdateAccountingPreferences:function(){var e=Object(c.a)(r.a.mark(function e(t,a){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.createOrUpdateAccountingPreferences({variables:{input:t}});case 3:return c=e.sent,n.props.dataPreferences.refetch(),e.abrupt("return",c.data);case 8:e.prev=8,e.t0=e.catch(0),Object(g.a)(n.props.alert,Object(g.b)(e.t0));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}(),export:function(){var e=Object(c.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.accountingExport();case 2:return t=e.sent,a=t.data,e.abrupt("return",a&&a.export);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),preferences:void 0}},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataPreferences,n=e.dataExports;return i.createElement(u,{value:{accounting:Object(v.a)({},this.state.accounting,{accountingExports:n,preferences:t&&t.accountingPreferences})}},this.props.children)}}]),t}(i.PureComponent),V=Object(O.compose)(O.withApollo,h.b(),Object(O.graphql)(U,{name:"createOrUpdateAccountingPreferences"}),Object(O.graphql)(L,{options:function(e){return{fetchPolicy:"network-only",variables:{default:e.common,types:e.types}}},props:function(e){return{dataPreferences:e.data}},skip:function(e){return!e.types}}),Object(O.graphql)(T,{options:function(e){return{variables:{limit:e.limit,offset:e.offset}}},props:function(e){return{dataExports:e.data}},skip:function(e){return!e.export}}),Object(O.graphql)(S,{name:"accountingExport"}))(B);n.d(t,"b",function(){return V}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return b})},892:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a,r=n(234),c=n(24);!function(e){e.LEDGER_BANK="LEDGER_BANK",e.LEDGER_PURCHASE="LEDGER_PURCHASE",e.LEDGER_SALES="LEDGER_SALES",e.LEDGER_MISC="LEDGER_MISC",e.VAT_ACCOUNT="VAT_ACCOUNT",e.PURCHASE_ACCOUNT="PURCHASE_ACCOUNT",e.BANK_ACCOUNT="BANK_ACCOUNT",e.BANK_ACCOUNT_TREEZOR="BANK_ACCOUNT_TREEZOR"}(a||(a={}));Object.keys(a).reduce(function(e,t,n){return Object(c.a)({},e,Object(r.a)({},t,n))},{})},901:function(e,t,n){}}]);
//# sourceMappingURL=34.60ab70c8.chunk.js.map