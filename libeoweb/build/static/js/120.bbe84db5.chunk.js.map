{"version":3,"sources":["screens/Kyc/5Sign/Sign.tsx","screens/Kyc/Manager.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/pdfjs-dist/build sync"],"names":["Sign","props","_this","Object","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","this","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","call","state","btnDisabled","btnLoading","contract","undefined","pages","handleOnDocumentComplete","onDocumentComplete","bind","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_10__","setState","form","validateFields","_ref","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","mark","_callee2","err","values","company","wrap","_context2","prev","next","_this2","signContract","abrupt","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_8__","prototype","stop","_x","_x2","apply","arguments","getContract","_this$props","intl","_this$state","react__WEBPACK_IMPORTED_MODULE_13__","className","react_pdf_js__WEBPACK_IMPORTED_MODULE_16__","scale","file","staticAssets","page","Array","from","keys","map","p","i","key","concat","components_Form__WEBPACK_IMPORTED_MODULE_11__","id","label","react_intl__WEBPACK_IMPORTED_MODULE_15__","rules","message","formatMessage","required","Manager","defaultProps","kycProps","bottomBar","btn","btnLater","btnLaterLink","btnLink","headingDescription","headingTitle","nextStep","step","compose","Company","KycCtx","antd_es_form__WEBPACK_IMPORTED_MODULE_1__","create","injectIntl","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","handleLater","later","_workspace_libeoweb_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","handleSave","save","handleError","onError","kycSetState","kyc","history","push","btnLaterLoading","_this$props2","offValidateStep","offValidateLater","_this$props3","onValidateStep","onValidateLater","node","_this$props4","user","me","data","currentCompany","name","brandName","react__WEBPACK_IMPORTED_MODULE_9__","components_Typo__WEBPACK_IMPORTED_MODULE_8__","titleVariables","title","description","React","get_get","target","property","receiver","Reflect","get","base","object","hasOwnProperty","getPrototypeOf","_superPropBase","desc","getOwnPropertyDescriptor","value","__webpack_require__","d","__webpack_exports__","webpackEmptyContext","req","e","Error","code","resolve","module","exports"],"mappings":"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","file":"static/js/120.bbe84db5.chunk.js","sourcesContent":["import { Form } from 'antd';\nimport { FormComponentProps } from 'antd/lib/form';\nimport { Checkbox } from 'components/Form';\nimport * as Company from 'context/Company';\nimport * as React from 'react';\nimport { compose } from 'react-apollo';\nimport { FormattedMessage, InjectedIntlProps, injectIntl } from 'react-intl';\nimport PDF from 'react-pdf-js';\nimport history from 'store/history';\nimport { staticAssets } from 'utils/common';\nimport config from 'utils/config';\nimport * as KycCtx from '../context';\nimport Manager, { IManagerProps, IManagerState } from '../Manager';\n\ninterface IProps\n  extends IManagerProps,\n    FormComponentProps,\n    Company.InjectedProps,\n    InjectedIntlProps,\n    Company.InjectedProps {}\ninterface IState extends IManagerState {\n  pages: number;\n  contract?: string;\n}\n\nclass Sign extends Manager<IProps, IState> {\n  static defaultProps = {\n    kycProps: {\n      bottomBar: true,\n      btn: 'kyc.bottom.confirm',\n      btnLater: 'kyc.bottom.later',\n      btnLaterLink: '/',\n      btnLink: '/kyc/iban',\n      headingDescription: 'kyc.sign.description',\n      headingTitle: 'kyc.sign.title',\n      nextStep: 'IBAN',\n      step: 'SIGN',\n    },\n  };\n\n  state = {\n    btnDisabled: false,\n    btnLoading: false,\n    contract: undefined,\n    pages: 0,\n  };\n\n  handleOnDocumentComplete: (props: any) => void;\n  constructor(props: any) {\n    super(props);\n    this.handleOnDocumentComplete = this.onDocumentComplete.bind(this);\n  }\n\n  onDocumentComplete(pages: any) {\n    this.setState({ pages });\n  }\n\n  async later() {\n    return super.later();\n  }\n\n  async save() {\n    this.props.form.validateFields(async (err: any, values: any) => {\n      if (!err) {\n        this.setState({ btnLoading: true });\n        const { company } = this.props;\n        if (company && company.signContract) {\n          await company.signContract();\n        }\n        return super.save();\n      }\n    });\n    return false;\n  }\n\n  async componentDidMount() {\n    super.componentDidMount();\n    const { company } = this.props;\n\n    if (company && company.getContract) {\n      const contract: string | undefined = await company.getContract();\n\n      if (contract) {\n        this.setState({\n          contract,\n        });\n      }\n    }\n  }\n\n  render() {\n    const { company, form, intl } = this.props;\n    const { pages, contract } = this.state;\n\n    return super._render(\n      <>\n        <div className=\"sign-contract-wrapper\">\n          {contract && (\n            <PDF\n              scale={5}\n              className=\"sign-contract\"\n              onDocumentComplete={this.handleOnDocumentComplete}\n              file={staticAssets(contract)}\n              page={1}\n            />\n          )}\n          {pages - 1 > 0 &&\n            Array.from(Array(pages - 1).keys()).map(\n              (p, i) =>\n                contract && (\n                  <PDF\n                    key={`${i}`}\n                    className=\"sign-contract\"\n                    file={staticAssets(contract)}\n                    page={i + 2}\n                  />\n                ),\n            )}\n        </div>\n        <div className=\"sign-contract-checkbox\">\n          <Checkbox\n            id=\"accept\"\n            label={<FormattedMessage id=\"kyc.sign.accept\" />}\n            rules={[\n              {\n                message: intl.formatMessage({\n                  id: 'kyc.sign.accept_error',\n                }),\n                required: true,\n              },\n            ]}\n            form={form}\n          />\n        </div>\n      </>,\n    );\n  }\n}\n\nexport default compose(\n  Company.hoc(),\n  KycCtx.hoc(),\n  Form.create({}),\n  injectIntl,\n)(Sign);\n","import { FormComponentProps } from 'antd/lib/form';\nimport { Heading } from 'components/Typo';\nimport * as Company from 'context/Company';\nimport * as User from 'context/User';\nimport * as React from 'react';\nimport { compose } from 'react-apollo';\nimport { InjectedIntlProps } from 'react-intl';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport history from 'store/history';\nimport BottomBar from './BottomBar';\nimport * as KycCtx from './context';\n\nexport interface IManagerProps\n  extends RouteComponentProps,\n    FormComponentProps,\n    Company.InjectedProps,\n    User.InjectedProps,\n    InjectedIntlProps,\n    KycCtx.InjectedProps {\n  kycProps: {\n    headingTitle?: string;\n    headingDescription?: string;\n    sidebar?: boolean;\n    step?: string;\n    nextStep?: string;\n    bottomBar?: boolean;\n    btn?: string;\n    btnDisabled?: boolean;\n    btnLink?: string;\n    btnLater?: string;\n    btnLaterLink?: string;\n  };\n}\n\nexport interface IManagerState {}\n\nclass Manager<\n  P extends IManagerProps,\n  S extends IManagerState & any\n> extends React.PureComponent<P, S & any> {\n  static defaultProps: Partial<IManagerProps> = {};\n\n  state: Partial<IManagerState> = {};\n\n  handleLater: () => Promise<boolean | undefined>;\n  handleSave: () => Promise<boolean | undefined>;\n  handleError: () => void;\n  constructor(props: any) {\n    super(props);\n\n    this.handleLater = this.later.bind(this);\n    this.handleSave = this.save.bind(this);\n    this.handleError = this.onError.bind(this);\n  }\n\n  load() {\n    this.props.kycSetState &&\n      this.props.kycSetState({\n        btnLoading: true,\n      });\n  }\n\n  async later(): Promise<boolean | undefined> {\n    const {\n      kyc: { btnLaterLink },\n    } = this.props;\n    btnLaterLink && history.push(btnLaterLink as string);\n    return true;\n  }\n\n  async onError() {\n    this.props.kycSetState &&\n      this.props.kycSetState({\n        btnLaterLoading: false,\n        btnLoading: false,\n      });\n  }\n\n  async save(): Promise<boolean | undefined> {\n    const {\n      company,\n      kycSetState,\n      kyc: { nextStep, btnLink },\n    } = this.props;\n    kycSetState({ btnLoading: true });\n\n    if (nextStep && company) {\n      await company.step(nextStep);\n    }\n    kycSetState({ btnLoading: false });\n    btnLink && history.push(btnLink);\n    return true;\n  }\n\n  componentWillUnmount() {\n    const { offValidateStep, offValidateLater } = this.props;\n    offValidateStep && offValidateStep(this.handleSave);\n    offValidateLater && offValidateLater(this.handleLater);\n  }\n\n  componentDidMount() {\n    const { onValidateStep, onValidateLater } = this.props;\n    onValidateStep && onValidateStep(this.handleSave);\n    onValidateLater && onValidateLater(this.handleLater);\n\n    this.props.kycSetState && this.props.kycSetState(this.props.kycProps);\n  }\n\n  _render(node: React.ReactNode) {\n    const { kycProps, user } = this.props;\n    const me = user && user.data && user.data.me;\n    const company =\n      me &&\n      me.currentCompany &&\n      (me.currentCompany.name || me.currentCompany.brandName);\n\n    const headingTitle = kycProps && kycProps.headingTitle;\n    const headingDescription = kycProps && kycProps.headingDescription;\n\n    return (\n      <div className=\"kyc-children\">\n        {headingTitle && (\n          <div>\n            <Heading\n              titleVariables={{\n                company,\n              }}\n              title={headingTitle}\n              description={headingDescription}\n            />\n          </div>\n        )}\n        {node}\n      </div>\n    );\n  }\n}\n\n// export default compose(\n//   KycCtx.hoc()\n// )(Manager);\nexport default Manager;\n","import getPrototypeOf from \"./getPrototypeOf\";\nimport superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 792;"],"sourceRoot":""}