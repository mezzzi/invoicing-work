(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1096:function(e,t,a){},1101:function(e,t,a){},1295:function(e,t,a){"use strict";a.r(t);a(131);var n=a(43),r=(a(97),a(50)),c=a(8),o=a(14),i=a(9),l=a(7),s=a(10),d=a(16),u=a(28),m=a(108),p=a(56),f=a(796),v=a(82),b=a(782),E=a(267),h=a(52),y=a(0),g=a(44),O=a(771),I=(a(989),a(246)),j=a(26),k=a.n(j),S=a(959),w=function(e,t,a){var n=Math.max.apply(Math,Object(g.a)(e.map(function(e){return e.y}))),r=Math.min.apply(Math,Object(g.a)(e.map(function(e){return e.y}))),c=100-100*Math.abs(r)/(Math.abs(n)+Math.abs(r));return r>0?[y.createElement("stop",{key:t?"".concat(t,"-1"):"1",offset:"0%",stopColor:"#5DBE42",stopOpacity:"1"}),y.createElement("stop",{key:t?"".concat(t,"-2"):"2",offset:"100%",stopColor:"#5DBE42",stopOpacity:a?"0":"1"})]:n<=0?[y.createElement("stop",{key:t?"".concat(t,"-2"):"2",offset:"0%",stopColor:"#FF5F5F",stopOpacity:a?"0":"1"}),y.createElement("stop",{key:t?"".concat(t,"-1"):"1",offset:"100%",stopColor:"#FF5F5F",stopOpacity:"1"})]:[y.createElement("stop",{key:t?"".concat(t,"-1"):"1",offset:"0%",stopColor:"#5DBE42",stopOpacity:"1"}),y.createElement("stop",{key:t?"".concat(t,"-2"):"2",offset:"".concat(c,"%"),stopColor:"#5DBE42",stopOpacity:a?"0":"1"}),y.createElement("stop",{key:t?"".concat(t,"-3"):"3",offset:"".concat(c,"%"),stopColor:"#FF5F5F",stopOpacity:a?"0":"1"}),y.createElement("stop",{key:t?"".concat(t,"-4"):"4",offset:"100%",stopColor:"#FF5F5F",stopOpacity:"1"})]},C=function(e){var t=e.lines,a=e.loading;return y.createElement(I.a.Bloc,{useSpace:!0,loading:a,className:"chart-wrapper"},t&&t.length>0&&y.createElement(y.Fragment,null,y.createElement(S.i,{width:"100%",height:"100%"},y.createElement(S.b,{data:t},y.createElement(S.j,{type:"category",tickLine:!1,tickFormatter:function(e){return k()(e).format("MM/YYYY")},axisLine:!1,stroke:"#ECECEC",dataKey:"x"}),y.createElement(S.k,{stroke:"#ECECEC",dataKey:"y"}),y.createElement("defs",null,y.createElement("linearGradient",{id:"areaColor",x1:"0",y1:"0",x2:"0",y2:"1"},t&&w(t,"area-chart",!0))),y.createElement(S.h,{y:"0",stroke:"#ECECEC",label:"",strokeDasharray:"3 3"}),y.createElement(S.a,{type:"monotone",dataKey:"y",stroke:0,fill:"url(#areaColor)"}))),y.createElement("div",{className:"absolute-line-chart"},y.createElement(S.i,{width:"100%",height:"100%"},y.createElement(S.e,{data:t},y.createElement(S.j,{stroke:"transparent",dataKey:"x"}),y.createElement(S.k,{stroke:"transparent",dataKey:"y"}),y.createElement("defs",null,y.createElement("linearGradient",{id:"strokeColor",x1:"0",y1:"0",x2:"0",y2:"1"},t&&w(t,"line-chart",!1))),y.createElement(S.d,{dot:!1,type:"monotone",dataKey:"y",stroke:"url(#strokeColor)"}))))))},D=a(271),N=a(29),x=a(1094),A=a.n(x),_=a(21),F=y.useState,P=Math.PI/180,$=function(e,t){var a=t.cx,n=t.cy,r=t.color,c=t.midAngle,o=t.innerRadius,i=t.outerRadius,l=(t.percent,t.payload),s=(t.index,o+1.5*(i-o)),d=a+s*Math.cos(-c*P),u=n+s*Math.sin(-c*P);return y.createElement("g",{fill:"red"},l.solde>0&&y.createElement(y.Fragment,null,y.createElement("text",{x:d,y:u,fill:r,textAnchor:d>a?"start":"end",dominantBaseline:"central"},e.formatMessage({id:l.id})),y.createElement("text",{x:d,y:u,dy:20,fill:"black",style:{fontSize:"14px",fontWeight:400},textAnchor:d>a?"start":"end",dominantBaseline:"central"},e.formatMessage({id:"dashboard.chart.pie_legend_solde"},{solde:Math.round(100*l.solde)/100}))))},B=Object(N.compose)(_.e)(function(e){var t=e.rows,a=e.loading,n=e.intl,c=F(0),o=Object(D.a)(c,2),i=(o[0],o[1],function(e){var t=0,a=k()(new Date),n=[{color:"#CB3043",id:"dashboard.chart.pie_legend_5",name:"1-5",solde:0,value:0},{color:"#F66073",id:"dashboard.chart.pie_legend_20",name:"5-20",solde:0,value:0},{color:"#FF7960",id:"dashboard.chart.pie_legend_45",name:"20-45",solde:0,value:0},{color:"#0074F9",id:"dashboard.chart.pie_legend_more",name:"+45",solde:0,value:0}];return e&&e.map(function(e,r){var c=k()(e.dueDate).diff(a,"days");c<5?(n[0].value+=1,n[0].solde+=e.total):c<20?(n[1].value+=1,n[1].solde+=e.total):c<45?(n[2].value+=1,n[2].solde+=e.total):(n[3].value+=1,n[3].solde+=e.total),t+=e.total}),{data:n,total:t}}(t)),l=i.data,s=i.total;return y.createElement("div",{className:"chart-wrapper"},y.createElement(r.a,{style:{alignItems:"center",height:"100%",justifyContent:"center"},type:"flex"},y.createElement(I.a.Bloc,{style:{height:"100%",position:"relative",width:"100%"},useSpace:!0,loading:a},y.createElement("span",{className:"pie-total"},y.createElement("div",{className:"pie-total-info"},y.createElement(_.b,{id:"dashboard.chart.total_info"})),y.createElement(A.a,{end:s}),y.createElement(_.b,{id:"dashboard.chart.total",values:{solde:s}})),y.createElement(S.i,{width:"100%",height:"100%"},y.createElement(S.g,null,y.createElement(S.f,{labelLine:!1,label:$.bind(null,n),data:l,innerRadius:75,outerRadius:100,paddingAngle:.1,dataKey:"value"},l&&l.map(function(e,t){return y.createElement(S.c,{key:"cell-".concat(t),fill:e.color})})))))))}),M=a(248),T=function(e,t){return{dateString:k()(t).format("MM/YYYY"),x:t,y:e}},R=function(e){var t=e.loading;return y.createElement(M.b,{balance:!0},y.createElement(M.a,null,function(e){var a=e.balance,n=function(e){return e&&e.data&&e.data.balance?e.data.balance.currentBalance:0}(a);return t=function(e){return!e||!e.data||!1!==e.data.loading}(a),y.createElement(b.b,{offset:0,limit:100,filters:{enabled:!0,status:[v.a.ToPay,v.a.Planned]}},y.createElement(b.a,null,function(e){var a,r=e.invoices&&e.invoices.data&&e.invoices.data.invoices&&e.invoices.data.invoices.rows;t=!((a=e)&&a.invoices&&a.invoices.data&&!1===a.invoices.data.loading);var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,a=[],n=(new Date).getTime();if(t&&t.length>0){a.push(T(0,n)),t&&t.forEach(function(e){return new Date(e.dueDate).getTime()>n&&a.push(T(e.total,new Date(e.dueDate).getTime()))});var r=[];return a.forEach(function(e){e.dateString&&(r[e.dateString]||(r[e.dateString]={x:e.dateString,y:0}),r[e.dateString]={x:k()("01/".concat(e.dateString),"DD/MM/YYYY").valueOf(),y:e.y+r[e.dateString].y})}),(r=Object.keys(r).map(function(e){return{x:r[e].x,y:r[e].y}})).sort(function(e,t){return e.x-t.y}),r=[{x:(new Date).getTime(),y:e}].concat(Object(g.a)(r.map(function(t){return{x:t.x,y:e-=t.y}})))}return a}(n,r);return y.createElement(O.a,{title:y.createElement(_.b,{id:"dashboard.chart.line_title"}),titleAlign:"left",center:!0,shadow:!0},y.createElement("div",{className:"chart-dashboard-line"},y.createElement(I.a.Bloc,{block:!0,className:"chart-dashboard-solde",loading:Boolean(t)},y.createElement(_.b,{id:"dashboard.chart.line_solde",values:{solde:n}})),y.createElement(I.a.Bloc,{block:!0,className:"chart-dashboard-description",loading:Boolean(t)},y.createElement(_.b,{id:"dashboard.chart.line_solde_waiting",values:{solde:n}})),y.createElement("div",{className:"chart-wrapper-outer"},y.createElement(C,{loading:Boolean(t),lines:c}))))}))}))},U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.loading;return y.createElement(b.b,{offset:0,limit:100,filters:{enabled:!0,status:[v.a.ToPay,v.a.Planned]}},y.createElement(b.a,null,function(t){e=!0,t&&t.invoices&&t.invoices.data&&!1===t.invoices.data.loading&&(e=!1);var a,n=t.invoices&&t.invoices.data&&t.invoices.data.invoices,r=n&&n.rows?n.rows.sort(function(e,t){return new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime()}):void 0,c=k()(new Date);return r&&(a=[],r.map(function(e){k()(e.dueDate).isSameOrAfter(c)&&a&&a.push(e)})),y.createElement(O.a,{title:y.createElement(_.b,{id:"dashboard.chart.pie_title"}),titleAlign:"left",center:!0,shadow:!0},y.createElement("div",{className:"chart-dashboard-pie"},y.createElement(I.a.Bloc,{useSpace:!0,className:"chart-wrapper-outer",loading:Boolean(e)},y.createElement(B,{loading:Boolean(e),rows:a}))))}))}}]),t}(y.PureComponent),Y=a(609),q=(a(1096),function(e){var t=e.status,a=e.description,n=e.color,r=e.loading,c=e.to,o=e.style,i=e.icon;return y.createElement(b.b,{offset:0,limit:1,count:t},y.createElement(b.a,null,function(e){var t=e.invoices&&e.invoices.count&&e.invoices.count.invoices,l=!1;return e.invoices?e.invoices&&e.invoices.loading&&(l=!0):l=!0,y.createElement(Y.a,{to:c},y.createElement(O.c,{style:o,loading:r||l,center:!1,className:"bloc-invoice-count",color:n,title:t?t.total:"",description:a,icon:i}))}))}),L=(a(1098),a(1266)),G=a(30),V=L.a.Step,K=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.user,t=e&&e.data&&e.data.me,a=t&&t.currentCompany,c=-1;a&&a.kycStep&&(c=0,a.kycStep.indexOf("PERSONNAL_INFORMATION")>-1&&(c=1),a.kycStep.indexOf("BENEFICIARIES")>-1&&(c=2),a.kycStep.indexOf("SIGN")>-1&&(c=3),a.kycStep.indexOf("IBAN")>-1&&(c=4));return y.createElement(O.a,{center:!0,style:{flexDirection:"row"},shadow:!0},y.createElement(r.a,{type:"flex",style:{alignItems:"center",width:"100%"}},y.createElement(n.a,{style:{flex:1}},y.createElement(L.a,{progressDot:function(e,t){var n,r=t.status,c=t.index;switch(r){case"finish":n=y.createElement("div",{className:"dot-".concat(r)},y.createElement(G.a,{value:u.a.Checkmark}));break;case"process":if(4===c){var o=a.kycStatus===f.b.REFUSED;n=y.createElement("div",{className:"dot-".concat(r).concat(o?" error":"")},y.createElement(G.a,{value:o?u.a.Cross:u.a.Alarm}))}else n=y.createElement("div",{className:"dot-".concat(r)},y.createElement(G.a,{value:u.a.Alarm}));break;default:n=e}return n},current:c},y.createElement(V,{title:y.createElement(y.Fragment,null,y.createElement(G.a,{value:u.a.Profile}),y.createElement(_.b,{id:"dashboard.kyc.company"}))}),y.createElement(V,{title:y.createElement(y.Fragment,null,y.createElement(G.a,{value:u.a.Briefcase}),y.createElement(_.b,{id:"dashboard.kyc.informations"}))}),y.createElement(V,{title:y.createElement(y.Fragment,null,y.createElement(G.a,{value:u.a.UserGroup}),y.createElement(_.b,{id:"dashboard.kyc.beneficiary"}))}),y.createElement(V,{title:y.createElement(y.Fragment,null,y.createElement(G.a,{value:u.a.Paper}),y.createElement(_.b,{id:"dashboard.kyc.contract"}))}),y.createElement(V,{title:y.createElement(y.Fragment,null,y.createElement(G.a,{value:u.a.Wallet}),y.createElement(_.b,{id:"dashboard.kyc.iban"}))}))),a&&a.kycStatus===f.b.PENDING&&y.createElement("div",{className:"ant-btn ant-btn-default"},y.createElement(Y.a,{to:"/kyc-summary"},y.createElement(_.b,{id:"dashboard.incomplete.btn_summary"}))),!a&&y.createElement("div",{className:"ant-btn ant-btn-default"},y.createElement(Y.a,{to:"/kyc"},y.createElement(_.b,{id:"dashboard.incomplete.btn_start"}))),a&&!a.kycStatus&&y.createElement("div",{className:"ant-btn ant-btn-default"},y.createElement(Y.a,{to:"/kyc"},y.createElement(_.b,{id:"dashboard.incomplete.btn_complete"})))))}}]),t}(y.PureComponent),W=h.b()(K),J=a(88),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={},a.handleUpload=a.upload.bind(Object(d.a)(Object(d.a)(a))),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"upload",value:function(){var e=this.props.upload,t=e&&e.setVisibility;t&&t(!0)}},{key:"render",value:function(){var e=this.props.user,t=e&&e.data&&e.data.me,a=t&&t.currentCompany;if(a)if("undefined"===typeof a.kycStatus||null===a.kycStatus)0;else switch(a.kycStatus){case f.b.BENEFICIARIES_VALIDATED:2;break;default:1}return y.createElement(O.a,{center:!0,className:"card-dashboard",style:{flexDirection:"row"},shadow:!0},y.createElement(G.a,{color:"#1F87FF",value:u.a.InvoiceScan}),y.createElement("div",{className:"card-dashboard-title"},y.createElement(_.b,{id:"dashboard.incomplete.import_facture_title"})),y.createElement("div",{className:"card-dashboard-description"},y.createElement(_.b,{id:"dashboard.incomplete.import_facture_description"})),y.createElement(J.c,{onClick:this.handleUpload},y.createElement(_.b,{id:"dashboard.incomplete.btn_import_facture"})))}}]),t}(y.PureComponent),Q=h.b()(E.b()(z)),X=(a(1101),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={},a.handleUpload=a.upload.bind(Object(d.a)(Object(d.a)(a))),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"upload",value:function(){var e=this.props.upload,t=e&&e.setVisibility;t&&t(!0)}},{key:"render",value:function(){var e=this.props.user,t=e&&e.data&&e.data.me,a=t&&t.currentCompany,c=!0;e&&e.data&&!1===e.data.loading&&(c=!1);var o=!c&&(!a||a.kycStatus!==f.b.VALIDATED),i="dashboard.incomplete.header_title",l="dashboard.incomplete.header_description";return o||(i="dashboard.complete.header_title",l="dashboard.complete.header_description"),y.createElement(m.b,{className:"dashboard"},y.createElement(r.a,{type:"flex",style:{justifyContent:"flex-end"}},y.createElement(p.f,{loading:c,title:i,titleVariables:t,description:l,button:"dashboard.header.upload_btn",onClick:this.handleUpload})),!c&&o&&y.createElement(r.a,{gutter:28,style:{marginTop:28}},y.createElement(n.a,{span:18},y.createElement(W,null))),y.createElement(b.b,{offset:0,limit:1,count:[v.a.Importing,v.a.Imported,v.a.Scanning,v.a.Scanned,v.a.ToPay,v.a.Planned,v.a.Paid]},y.createElement(b.a,null,function(e){var t=e.invoices&&e.invoices.count&&e.invoices.count.invoices;return c=!0,e.invoices&&e.invoices.count&&!1===e.invoices.count.loading&&(c=!1),t&&(t.total>0||c)?y.createElement(y.Fragment,null,y.createElement(r.a,{type:"flex",style:{marginTop:28},gutter:28},y.createElement(n.a,{xs:24,md:18},y.createElement(r.a,{type:"flex",gutter:28},y.createElement(n.a,{style:{marginBottom:"28px"},xs:24,md:12},y.createElement(R,{loading:c})),y.createElement(n.a,{style:{marginBottom:"28px"},xs:24,md:12},y.createElement(U,{loading:c})))),y.createElement(n.a,{xs:24,md:6},y.createElement(r.a,{type:"flex",gutter:28},y.createElement(n.a,{style:{marginBottom:"28px"},xs:12,md:24},y.createElement(q,{loading:c,to:"/purchase/draft",status:[v.a.Scanning,v.a.Scanned],color:"primary",description:"dashboard.bloc.invoice_to_control",icon:u.a.Search})),y.createElement(n.a,{style:{marginBottom:"28px"},xs:12,md:24},y.createElement(q,{loading:c,to:"/purchase/bills",status:[v.a.ToPay,v.a.Planned],color:"red",description:"dashboard.bloc.invoice_to_pay",icon:u.a.WalletOut})))))):!c&&t&&y.createElement(r.a,{gutter:28,style:{marginTop:28}},y.createElement(n.a,{span:18},y.createElement(Q,null)))})))}}]),t}(y.PureComponent));t.default=h.b()(E.b()(X))},765:function(e,t,a){"use strict";a(331);var n=a(247),r=(a(330),a(167)),c=a(57),o=a(8),i=a(14),l=a(9),s=a(7),d=a(10),u=a(30),m=a(28),p=a(0),f=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).onRemove=function(e){e.stopPropagation(),e.preventDefault();var t=a.props.onRemove;t&&t()},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.avatar,a=e.center,o=e.children,i=e.className,l=e.onClose,s=e.editable,d=e.onEdit,f=e.removable,v=e.shadow,b=e.title,E=e.primary,h=e.titleAlign,y=Object(c.a)(e,["avatar","center","children","className","onClose","editable","onEdit","removable","shadow","title","primary","titleAlign"]);return p.createElement(n.a,Object.assign({className:"card-item".concat(a?" center ":"").concat(v?" shadow ":"").concat(E?" primary ":"").concat(i?" ".concat(i):"")},y),l&&p.createElement("div",{onClick:l,className:"card-close"},p.createElement(u.a,{value:m.a.Cross})),s&&p.createElement("div",{onClick:d,className:"card-edit"},p.createElement(u.a,{value:m.a.Pencil})),f&&p.createElement("div",{onClick:this.onRemove,className:"card-remove"},p.createElement(u.a,{value:m.a.Trash})),t&&p.createElement(r.a,{className:"card-avatar"},t),b&&p.createElement("div",{className:"card-title".concat(h?" ".concat(h):"")},b),p.createElement("div",{className:"card-children"},o))}}]),t}(p.PureComponent);t.a=f},768:function(e,t,a){"use strict";var n=a(30),r=a(246),c=a(0),o=a(21),i=a(765);t.a=function(e){var t=e.className,a=e.center,l=e.title,s=e.description,d=e.icon,u=e.style,m=e.loading,p=e.color;return c.createElement(i.a,{style:u,center:a,className:"condensed-card".concat(t?" ".concat(t):""),shadow:!0},c.createElement("div",{className:"condensed-card-left"},c.createElement(r.a.Bloc,{loading:Boolean(m),className:"condensed-card-title"},l),s&&c.createElement(r.a.Bloc,{loading:Boolean(m),className:"condensed-card-description"},c.createElement(o.b,{id:s}))),c.createElement("div",{className:"condensed-card-right".concat(p?" ".concat(p):"")},c.createElement(n.a,{value:d})))}},769:function(e,t,a){"use strict";a(97);var n=a(50),r=(a(131),a(43)),c=a(8),o=a(14),i=a(9),l=a(7),s=a(10),d=a(0),u=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.title,c=e.rows,o=e.renderRow;return d.createElement(n.a,{className:"".concat(t?"className ":"")},d.createElement("div",{className:"card-row-title"},a),c&&c.map(function(e,t){return d.createElement(r.a,{className:"card-row-item",key:"".concat(t)},o?o(e):e)}))}}]),t}(d.PureComponent);t.a=u},771:function(e,t,a){"use strict";a(774);var n=a(765);a.d(t,"a",function(){return n.a});var r=a(768);a.d(t,"c",function(){return r.a});var c=a(769);a.d(t,"b",function(){return c.a})},774:function(e,t,a){},782:function(e,t,a){"use strict";var n=a(11),r=a.n(n),c=a(22),o=a(0),i=o.createContext({invoices:{count:{},data:{},delete:function(){},loading:!1,more:function(){},updateStatus:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},shouldPoll:!1}),l=i.Provider,s=i.Consumer,d=a(8),u=a(14),m=a(9),p=a(7),f=a(10),v=(a(106),a(44)),b=a(24),E=a(51),h=a(784),y=a(267),g=a(29),O=a(21),I=a(41),j=a(82),k=a(31),S=a(32),w=a.n(S),C=a(249);function D(){var e=Object(k.a)(["\n  query invoices($filters: InvoiceFilters, $limit: Int, $offset: Int) {\n    invoices(filters: $filters, limit: $limit, offset: $offset) {\n      total\n    }\n  }\n"]);return D=function(){return e},e}function N(){var e=Object(k.a)(["\n  query invoices($filters: InvoiceFilters, $limit: Int, $offset: Int) {\n    invoices(filters: $filters, limit: $limit, offset: $offset) {\n      total\n      rows {\n        ","\n      }\n    }\n  }\n"]);return N=function(){return e},e}var x=w()(N(),C.a.standalone),A=w()(D()),_=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={invoices:{count:{},data:{},delete:function(){var e=Object(c.a)(r.a.mark(function e(t,n){var c,o,i,l,s,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,c=!0,o=!1,i=void 0,e.prev=4,l=t[Symbol.iterator]();case 6:if(c=(s=l.next()).done){e.next=14;break}return d=s.value,e.next=10,a.props.removeInvoice({variables:{id:d.id}});case 10:e.sent;case 11:c=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),o=!0,i=e.t0;case 20:e.prev=20,e.prev=21,c||null==l.return||l.return();case 23:if(e.prev=23,!o){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:Object(I.a)(a.props.alert,[],[n||""]),a.refresh(),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Object(I.a)(a.props.alert,Object(I.b)(e.t1));case 35:case"end":return e.stop()}},e,null,[[0,32],[4,16,20,28],[21,,23,27]])}));return function(t,a){return e.apply(this,arguments)}}(),loading:!1,more:function(e){var t=a.props.dataInvoice;if(a.state&&a.state.invoices.loading)return null;var n=t.invoices.rows&&t.invoices&&t.invoices.rows&&t.invoices.rows.length;a.setState({invoices:Object(b.a)({},a.state.invoices,{loading:!0})}),t&&t.fetchMore&&t.fetchMore({updateQuery:function(e,t){var n=t.fetchMoreResult;return n.invoices?(a.setState({invoices:Object(b.a)({},a.state.invoices,{loading:!1})}),{invoices:Object(b.a)({},e.invoices,{rows:[].concat(Object(v.a)(e.invoices.rows),Object(v.a)(n.invoices.rows)),total:n.invoices.total})}):e},variables:{limit:10,offset:n||0}})},updateStatus:function(){var e=Object(c.a)(r.a.mark(function e(t,n,c){var o,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.updateInvoiceStatus({variables:{id:t,status:n}});case 3:return o=e.sent,o.errors,i=o.data,Object(I.a)(a.props.alert,[],c?[c]:void 0),e.abrupt("return",i.updateInvoiceStatus);case 10:e.prev=10,e.t0=e.catch(0),Object(I.a)(a.props.alert,Object(I.b)(e.t0));case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,a,n){return e.apply(this,arguments)}}()},shouldPoll:!1},a.refresh=function(){a.props.dataInvoice&&a.props.dataInvoice.refetch()},a.componentDidMount=function(){var e=a.props.upload;e&&e.on(a.refresh)},a.componentWillUnmount=function(){var e=a.props.upload;e&&e.off(a.refresh)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataInvoice,a=e.dataCount;return o.createElement(l,{value:Object(b.a)({},this.state,{invoices:Object(b.a)({},this.state.invoices,{count:a,data:t})})},this.props.children)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.upload,n=!!(a&&a.filesUploading&&a.filesUploading.length>0);if(e.dataInvoice&&e.dataInvoice.invoices){var r=!1;if(e.dataInvoice.invoices&&e.dataInvoice.invoices.rows&&e.dataInvoice.invoices.rows.map(function(e){!e||e.error||e.status!==j.a.Importing&&e.status!==j.a.Imported&&e.status!==j.a.Scanning||(r=!0)}),!n&&r!==t.shouldPoll)return r&&e.dataScanningInvoice.startPolling(5e3),r||e.dataScanningInvoice.stopPolling(),{shouldPoll:r}}return t}}]),t}(o.PureComponent),F={options:function(e){return{fetchPolicy:"network-only",variables:{filters:{enabled:!0,status:[j.a.Importing,j.a.Imported,j.a.Scanning]}}}},props:function(e){return{dataScanningInvoice:e.data}}},P=Object(g.compose)(g.withApollo,O.e,E.b(),y.b(),Object(g.graphql)(h.e,{name:"removeInvoice"}),Object(g.graphql)(x,{options:function(e){return{fetchPolicy:"network-only",variables:{filters:e.filters,limit:e.limit,offset:e.offset}}},props:function(e){return{dataInvoice:e.data}},skip:function(e){return e.count}}),Object(g.graphql)(x,F),Object(g.graphql)(A,{options:function(e){return{fetchPolicy:"network-only",limit:1,variables:{filters:{enabled:!0,status:e.count},offset:0}}},props:function(e){return{dataCount:e.data}},skip:function(e){return!e.count}}),Object(g.graphql)(h.g,{name:"updateInvoiceStatus"}))(_);a.d(t,"b",function(){return P}),a.d(t,"a",function(){return s})},784:function(e,t,a){"use strict";a.d(t,"b",function(){return f}),a.d(t,"f",function(){return v}),a.d(t,"g",function(){return b}),a.d(t,"e",function(){return E}),a.d(t,"a",function(){return h}),a.d(t,"c",function(){return y}),a.d(t,"d",function(){return g});var n=a(31),r=a(32),c=a.n(r),o=a(249);function i(){var e=Object(n.a)(["\n  mutation payoutContacts($invoiceId: ID!, $contactIds: [ID]) {\n    payoutContacts(invoiceId: $invoiceId, contactIds: $contactIds)\n  }\n"]);return i=function(){return e},e}function l(){var e=Object(n.a)(["\n  ","\n\n  mutation payout($invoiceId: ID!, $date: String, $code: String) {\n    payout(invoiceId: $invoiceId, date: $date, code: $code) {\n      ","\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=Object(n.a)(["\n  mutation generateCode($invoiceId: ID!) {\n    generateCode(invoiceId: $invoiceId) {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=Object(n.a)(["\n  mutation removeInvoice($id: ID!) {\n    removeInvoice(id: $id) {\n      id\n    }\n  }\n"]);return d=function(){return e},e}function u(){var e=Object(n.a)(["\n  ","\n\n  mutation updateInvoiceStatus($id: ID!, $status: InvoiceStatus!) {\n    updateInvoiceStatus(id: $id, status: $status) {\n      ","\n    }\n  }\n"]);return u=function(){return e},e}function m(){var e=Object(n.a)(["\n  ","\n\n  mutation updateInvoice($id: ID!, $input: UpdateInvoiceInput!) {\n    updateInvoice(id: $id, input: $input) {\n      ","\n    }\n  }\n"]);return m=function(){return e},e}function p(){var e=Object(n.a)(["\n  ","\n\n  query invoice($id: ID!) {\n    invoice(id: $id) {\n      ","\n    }\n  }\n"]);return p=function(){return e},e}var f=c()(p(),o.a.fragment,o.a.query),v=c()(m(),o.a.fragment,o.a.query),b=c()(u(),o.a.fragment,o.a.query),E=c()(d()),h=c()(s()),y=c()(l(),o.a.fragment,o.a.query),g=c()(i())},796:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n,r,c=a(234),o=a(24);!function(e){e.unknown="UNKNOW",e.exist="EXIST",e.already="ALREADY",e.self="SELF"}(n||(n={})),function(e){e.CONTRACT_SIGNED="CONTRACT_SIGNED",e.BENEFICIARIES_ADDED="BENEFICIARIES_ADDED",e.BENEFICIARIES_VALIDATED="BENEFICIARIES_VALIDATED",e.PENDING="PENDING",e.SUMMARY="SUMMARY",e.VALIDATED="VALIDATED",e.REFUSED="REFUSED"}(r||(r={}));var i;Object.keys(r).reduce(function(e,t,a){return Object(o.a)({},e,Object(c.a)({},t,a))},{});!function(e){e.createdAt_ASC="createdAt_ASC",e.createdAt_DESC="createdAt_DESC",e.updatedAt_ASC="updatedAt_ASC",e.updatedAt_DESC="updatedAt_DESC"}(i||(i={}))},989:function(e,t,a){}}]);
//# sourceMappingURL=20.210af14e.chunk.js.map