(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1283:function(e,t,n){"use strict";n.r(t);n(166);var a=n(107),r=(n(131),n(43)),c=(n(97),n(50)),o=n(11),i=n.n(o),u=n(22),s=n(8),l=n(14),d=n(9),m=n(7),b=n(10),p=n(28),f=n(88),v=n(771),k=n(849),h=n(108),O=n(56),w=n(813),j=n(902),E=n(52),g=n(26),y=n.n(g),A=n(0),_=n(29),N=n(21),C=n(62),M=n(196),B=(n(810),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={modalRemoveVisible:!1,modalVisible:!1},n.openModal=function(e){e&&e.preventDefault(),n.setState({modalVisible:!0})},n.later=function(){C.a.push("/company/bank")},n.close=function(e,t,a){n.setState({modalVisible:!1}),a&&e&&t&&t(e,a)},n.remove=function(){var e=Object(u.a)(i.a.mark(function e(t,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,a(t);case 3:e.sent?C.a.push("/company/bank"):n.setState({modalRemoveVisible:!1});case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.showModalRemove=function(){n.setState({modalRemoveVisible:!0})},n.cancelRemove=function(){n.setState({modalRemoveVisible:!1})},n}return Object(b.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=(t.intl,t.form,this.state),o=a.modalVisible,i=a.modalRemoveVisible,u=this.props.match,s=u&&u.params&&u.params.bankId,l=n&&n.data&&n.data.me,d=l&&l.currentCompany,m=d&&d.addresses&&d.addresses.rows&&d.addresses.rows[0];return A.createElement(h.b,{className:"mandate"},A.createElement(c.a,{type:"flex"},A.createElement(O.f,{icon:p.a.Wallet,title:"bank.mandate_view.title",description:"bank.mandate_view.description"})),d&&A.createElement(w.b,{id:s},A.createElement(w.a,null,function(t){var n=t.bank,a=n&&n.removeMandate,u=n&&n.generateCode,s=n&&n.sign,d=n&&n.bankAccount&&n.bankAccount.bankAccount,b=d&&d.mandates&&d.mandates.find(function(e){return e.status!==j.a.Canceled});return b&&A.createElement(A.Fragment,null,o&&A.createElement(k.b,{onComplete:e.close.bind(null,b.id,s),id:b.id,generateCode:u,onCancel:e.close,visible:o}),i&&A.createElement(k.c,{onRemove:e.remove.bind(null,"".concat(b.id),a),onCancel:e.cancelRemove,visible:i}),A.createElement(v.a,{primary:!0,center:!1},A.createElement(c.a,{type:"flex"},A.createElement(O.e,{style:{flex:1}},A.createElement(N.b,{id:"bank.mandate_view_detail.title"})),A.createElement(c.a,null,A.createElement("div",{className:"row-title"},A.createElement(N.b,{id:"bank.mandate_view_detail.date"})),A.createElement("div",{className:"row-detail"},b&&y()(b.createdAt).format("DD/MM/YYYY")))),A.createElement(c.a,{gutter:28},A.createElement(r.a,{span:12},A.createElement(O.e,{css:{primaryColor:!0,uppercase:!0}},A.createElement(N.b,{id:"bank.mandate_view_detail.debtor"})),A.createElement("div",{className:"row-detail"},l.firstname," ",l.lastname),m&&A.createElement(A.Fragment,null,A.createElement("div",{className:"row-detail"},m.address1),A.createElement("div",{className:"row-detail"},m.zipcode,", ",m.city)),d&&A.createElement(A.Fragment,null,d.iban&&A.createElement(A.Fragment,null,A.createElement("div",{className:"row-title"},A.createElement(N.b,{id:"bank.mandate_view_detail.iban"})),A.createElement("div",{className:"row-detail"},d.iban.iban),A.createElement("div",{className:"row-title"},A.createElement(N.b,{id:"bank.mandate_view_detail.bic"})),A.createElement("div",{className:"row-detail"},d.iban.bic),A.createElement("div",{className:"row-title"},A.createElement(N.b,{id:"bank.mandate_view_detail.bank"})),A.createElement("div",{className:"row-detail"},d.iban.bank)))),A.createElement(r.a,{span:12},A.createElement(O.e,{css:{primaryColor:!0,uppercase:!0}},A.createElement(N.b,{id:"bank.mandate_view_detail.cr\xe9ditor"})),A.createElement("div",{className:"row-detail"},A.createElement(N.b,{id:"bank.mandate_view_detail.debtor_company"})),A.createElement("div",{className:"row-detail"},A.createElement(N.b,{id:"bank.mandate_view_detail.debtor_address1"})),A.createElement("div",{className:"row-detail"},A.createElement(N.b,{id:"bank.mandate_view_detail.debtor_zipcode"}),",\xa0",A.createElement(N.b,{id:"bank.mandate_view_detail.debtor_city"})),A.createElement("div",{className:"row-title"},A.createElement(N.b,{id:"bank.mandate_view_detail.id_creditor"})),A.createElement("div",{className:"row-detail"},A.createElement(N.b,{id:"bank.mandate_view_detail.debtor_id"})),A.createElement("a",{key:"download",href:b?Object(M.b)(b.filePath):"#",download:"rum.pdf",target:"_blank"},A.createElement(N.b,{id:"bank.mandate_view_detail.rum"})))),A.createElement("div",{className:"row-mandate-explain"},A.createElement(N.b,{id:"bank.mandate_view_detail.description"}))),A.createElement(h.d,{visible:!0},b.status===j.a.Signed&&A.createElement(A.Fragment,null,A.createElement(f.c,{style:{marginLeft:150,marginRight:50},onClick:e.showModalRemove,type:f.b.Default},A.createElement(N.b,{id:"bank.mandate_view_footer.remove"})),A.createElement("a",{style:{marginLeft:"auto",marginRight:50},className:"ant-btn ant-btn-primary",key:"download",href:"/company/bank"},A.createElement(N.b,{id:"bank.mandate_view_footer.later"}))),b.status!==j.a.Signed&&A.createElement(f.c,{style:{marginLeft:"auto",marginRight:50},onClick:e.openModal,type:f.b.Primary},A.createElement(N.b,{id:"bank.mandate_view_footer.sign"}))))})))}}]),t}(A.PureComponent));t.default=Object(_.compose)(N.e,E.b(),a.a.create({}))(B)},765:function(e,t,n){"use strict";n(331);var a=n(247),r=(n(330),n(167)),c=n(57),o=n(8),i=n(14),u=n(9),s=n(7),l=n(10),d=n(30),m=n(28),b=n(0),p=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).onRemove=function(e){e.stopPropagation(),e.preventDefault();var t=n.props.onRemove;t&&t()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.avatar,n=e.center,o=e.children,i=e.className,u=e.onClose,s=e.editable,l=e.onEdit,p=e.removable,f=e.shadow,v=e.title,k=e.primary,h=e.titleAlign,O=Object(c.a)(e,["avatar","center","children","className","onClose","editable","onEdit","removable","shadow","title","primary","titleAlign"]);return b.createElement(a.a,Object.assign({className:"card-item".concat(n?" center ":"").concat(f?" shadow ":"").concat(k?" primary ":"").concat(i?" ".concat(i):"")},O),u&&b.createElement("div",{onClick:u,className:"card-close"},b.createElement(d.a,{value:m.a.Cross})),s&&b.createElement("div",{onClick:l,className:"card-edit"},b.createElement(d.a,{value:m.a.Pencil})),p&&b.createElement("div",{onClick:this.onRemove,className:"card-remove"},b.createElement(d.a,{value:m.a.Trash})),t&&b.createElement(r.a,{className:"card-avatar"},t),v&&b.createElement("div",{className:"card-title".concat(h?" ".concat(h):"")},v),b.createElement("div",{className:"card-children"},o))}}]),t}(b.PureComponent);t.a=p},768:function(e,t,n){"use strict";var a=n(30),r=n(246),c=n(0),o=n(21),i=n(765);t.a=function(e){var t=e.className,n=e.center,u=e.title,s=e.description,l=e.icon,d=e.style,m=e.loading,b=e.color;return c.createElement(i.a,{style:d,center:n,className:"condensed-card".concat(t?" ".concat(t):""),shadow:!0},c.createElement("div",{className:"condensed-card-left"},c.createElement(r.a.Bloc,{loading:Boolean(m),className:"condensed-card-title"},u),s&&c.createElement(r.a.Bloc,{loading:Boolean(m),className:"condensed-card-description"},c.createElement(o.b,{id:s}))),c.createElement("div",{className:"condensed-card-right".concat(b?" ".concat(b):"")},c.createElement(a.a,{value:l})))}},769:function(e,t,n){"use strict";n(97);var a=n(50),r=(n(131),n(43)),c=n(8),o=n(14),i=n(9),u=n(7),s=n(10),l=n(0),d=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.title,c=e.rows,o=e.renderRow;return l.createElement(a.a,{className:"".concat(t?"className ":"")},l.createElement("div",{className:"card-row-title"},n),c&&c.map(function(e,t){return l.createElement(r.a,{className:"card-row-item",key:"".concat(t)},o?o(e):e)}))}}]),t}(l.PureComponent);t.a=d},771:function(e,t,n){"use strict";n(774);var a=n(765);n.d(t,"a",function(){return a.a});var r=n(768);n.d(t,"c",function(){return r.a});var c=n(769);n.d(t,"b",function(){return c.a})},774:function(e,t,n){},810:function(e,t,n){},813:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(22),o=n(0),i=o.createContext({bank:{bankAccount:void 0,bankAccounts:void 0,changeDefaultBankAccount:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),createMandate:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),createOrUpdate:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),generateCode:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),removeBankAccount:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),removeMandate:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),sign:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}}),u=i.Provider,s=i.Consumer,l=n(8),d=n(14),m=n(9),b=n(7),p=n(10),f=(n(106),n(44)),v=n(24),k=n(51),h=n(29),O=n(41),w=n(31),j=n(32),E=n.n(j),g=n(45),y=n(168),A=n(61);function _(){var e=Object(w.a)(["\n","\n\nfragment mandate on Mandate {\n  ","\n}"]);return _=function(){return e},e}function N(){var e=Object(w.a)(["\n","\n","\n\nfragment bankAccount on BankAccount {\n  ","\n}"]);return N=function(){return e},e}var C="\n  id\n  treezorMandateId\n  filePath\n  status\n  rum\n  signatoryIp\n  signaturedAt\n  createdAt\n  updatedAt\n",M={bank:{fragment:E()(N(),y.a.fragment,A.a.fragment,"\n  id\n  label\n  default\n  enabled\n"),query:"\n  ...bankAccount\n  company {\n    ".concat(g.a.standalone,"\n  }\n  iban {\n    ").concat(y.a.query,"\n  }\n  mandates {\n    ").concat(C,"\n    signatory {\n      ").concat(A.a.query,"\n    }\n  }\n")},mandate:{fragment:E()(_(),A.a.fragment,C),query:"\n  ...mandate\n  signatory {\n    ".concat(A.a.query,"\n  }\n")}};function B(){var e=Object(w.a)(["\n  ","\n\n  mutation removeMandate($id: ID!) {\n    removeMandate(id: $id) {\n      ","\n    }\n  }\n"]);return B=function(){return e},e}function q(){var e=Object(w.a)(["\n  ","\n\n  mutation signedMandate($id: ID!, $code: String!) {\n    signedMandate(id: $id, code: $code) {\n      ","\n    }\n  }\n"]);return q=function(){return e},e}function x(){var e=Object(w.a)(["\n  ","\n\n  mutation generateCodeMandate($id: ID!) {\n    generateCodeMandate(id: $id) {\n      ","\n    }\n  }\n"]);return x=function(){return e},e}function D(){var e=Object(w.a)(["\n  ","\n\n  query mandate($id: ID!) {\n    mandate(id: $id) {\n      ","\n    }\n  }\n"]);return D=function(){return e},e}function $(){var e=Object(w.a)(["\n  ","\n\n  mutation createMandate($bankAccountId: ID!) {\n    createMandate(bankAccountId: $bankAccountId) {\n      ","\n    }\n  }\n"]);return $=function(){return e},e}function I(){var e=Object(w.a)(["\n  ","\n\n  mutation removeBankAccount($id: ID!) {\n    removeBankAccount(id: $id) {\n      ","\n    }\n  }\n"]);return I=function(){return e},e}function R(){var e=Object(w.a)(["\n  ","\n\n  mutation changeDefaultBankAccount($id: ID!) {\n    changeDefaultBankAccount(id: $id) {\n      ","\n    }\n  }\n"]);return R=function(){return e},e}function P(){var e=Object(w.a)(["\n  ","\n\n  query bankAccount($id: ID!) {\n    bankAccount(id: $id) {\n      ","\n    }\n  }\n"]);return P=function(){return e},e}function V(){var e=Object(w.a)(["\n  ","\n\n  mutation createOrUpdateBankAccount($input: BankAccountInput!, $id: ID) {\n    createOrUpdateBankAccount(input: $input, id: $id) {\n      ","\n    }\n  }\n"]);return V=function(){return e},e}function S(){var e=Object(w.a)(["\n  ","\n\n  query bankAccounts {\n    bankAccounts {\n      total\n      rows {\n        ","\n      }\n    }\n  }\n"]);return S=function(){return e},e}var U=E()(S(),M.bank.fragment,M.bank.query),F=E()(V(),M.bank.fragment,M.bank.query),L=E()(P(),M.bank.fragment,M.bank.query),Y=E()(R(),M.bank.fragment,M.bank.query),z=E()(I(),M.bank.fragment,M.bank.query),G=E()($(),M.mandate.fragment,M.mandate.query),J=(E()(D(),M.mandate.fragment,M.mandate.query),E()(x(),M.mandate.fragment,M.mandate.query)),Q=E()(q(),M.mandate.fragment,M.mandate.query),T=E()(B(),M.mandate.fragment,M.mandate.query),W=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={bank:{bankAccount:void 0,bankAccounts:void 0,changeDefaultBankAccount:function(){var e=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.changeDefaultBankAccount({variables:{id:t}});case 3:return a=e.sent,Object(O.a)(n.props.alert,Object(O.b)(a.errors),["bank.form.success_change_default"]),e.abrupt("return",a.data&&a.data.changeDefaultBankAccount);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(n.props.alert,Object(O.b)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),createMandate:function(){var e=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.createMandate({variables:{bankAccountId:t}});case 3:return a=e.sent,Object(O.a)(n.props.alert,Object(O.b)(a.errors),["bank.mandate.success_create"]),e.abrupt("return",a.data&&a.data.createMandate);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(n.props.alert,Object(O.b)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),createOrUpdate:function(){var e=Object(c.a)(r.a.mark(function e(t,a){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.createOrUpdateBankAccount({update:function(e,t){var n=t.data;if(!a){var r,c=e.readQuery({query:U});e.writeQuery({data:{bankAccounts:Object(v.a)({},c?c.bankAccounts:{},{rows:(r=[n.createOrUpdateBankAccount]).concat.apply(r,Object(f.a)(c&&c.bankAccounts?c.bankAccounts.rows:[])),total:c&&c.bankAccounts?c.bankAccounts.total+1:1})},query:U})}},variables:{input:t,id:a}});case 3:return c=e.sent,Object(O.a)(n.props.alert,Object(O.b)(c.errors),[a?"bank.form.success_updated":"bank.form.success_add"]),e.abrupt("return",c.data&&c.data.createOrUpdateBankAccount);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(n.props.alert,Object(O.b)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}(),generateCode:function(){var e=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.generateCodeMandate({variables:{id:t}});case 3:return a=e.sent,e.abrupt("return",!a.errors);case 7:e.prev=7,e.t0=e.catch(0),Object(O.a)(n.props.alert,Object(O.b)(e.t0));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),removeBankAccount:function(){var e=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.removeBankAccount({variables:{id:t}});case 3:return a=e.sent,Object(O.a)(n.props.alert,Object(O.b)(a.errors),["bank.row.success_remove"]),e.abrupt("return",a.data&&a.data.removeBankAccount);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(n.props.alert,Object(O.b)(e.t0));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),removeMandate:function(){var e=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.removeMandate({variables:{id:t}});case 3:return a=e.sent,Object(O.a)(n.props.alert,Object(O.b)(a.errors),["bank.mandate.success_remove"]),e.abrupt("return",a.data&&a.data.removeMandate);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(n.props.alert,Object(O.b)(e.t0));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),sign:function(){var e=Object(c.a)(r.a.mark(function e(t,a){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.signedMandate({variables:{id:t,code:a}});case 3:return c=e.sent,Object(O.a)(n.props.alert,Object(O.b)(c.errors),["bank.mandate.success_sign"]),e.abrupt("return",c.data&&c.data.signedMandate);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(n.props.alert,Object(O.b)(e.t0));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}()}},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataBankAccounts,n=e.dataBankAccount;return o.createElement(u,{value:{bank:Object(v.a)({},this.state.bank,{bankAccount:n,bankAccounts:t})}},this.props.children)}}]),t}(o.PureComponent),H=Object(h.compose)(h.withApollo,k.b(),Object(h.graphql)(F,{name:"createOrUpdateBankAccount"}),Object(h.graphql)(G,{name:"createMandate"}),Object(h.graphql)(Y,{name:"changeDefaultBankAccount"}),Object(h.graphql)(J,{name:"generateCodeMandate"}),Object(h.graphql)(Q,{name:"signedMandate"}),Object(h.graphql)(z,{name:"removeBankAccount"}),Object(h.graphql)(T,{name:"removeMandate"}),Object(h.graphql)(U,{props:function(e){return{dataBankAccounts:e.data}},skip:function(e){return!e.list}}),Object(h.graphql)(L,{options:function(e){return{variables:{id:e.id}}},props:function(e){return{dataBankAccount:e.data}},skip:function(e){return!e.id}}))(W);n.d(t,"b",function(){return H}),n.d(t,"a",function(){return s})},902:function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e.Pending="PENDING",e.Validated="VALIDATED",e.Canceled="CANCELED",e.Signed="SIGNED"}(a||(a={}))}}]);
//# sourceMappingURL=39.c3f040c2.chunk.js.map