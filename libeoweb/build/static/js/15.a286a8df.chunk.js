(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1313:function(e,t,a){"use strict";a.r(t);a(166);var r=a(107),n=a(11),o=a.n(n),c=a(22),i=a(8),s=a(14),l=a(9),u=a(7),d=a(773),p=a(10),f=a(16),m=a(56),h=a(778),b=a(269),y=a(0),v=a(29),E=a(21),k=a(772),_=a(770),g=(a(131),a(43)),O=(a(97),a(50)),j=a(44),S=a(266),C=a(780),x=a(835),L=a(776),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={btnDisabled:!1,documents:[],proofError:!1,proofType:void 0,proofs:[]},a.handleProofChange=a.proofChange.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.submit.bind(Object(f.a)(Object(f.a)(a))),a.handleLater=a.later.bind(Object(f.a)(Object(f.a)(a))),a.handleBur=a.blur.bind(Object(f.a)(Object(f.a)(a))),a.hanldeChangeProofType=a.changeProofType.bind(Object(f.a)(Object(f.a)(a))),a.handleProofCancel=a.proofCancel.bind(Object(f.a)(Object(f.a)(a))),a.handleProofRemove=a.proofRemove.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(s.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a=[],r=e.beneficiary;return r&&r.documents&&r.documents.rows&&r.documents.rows.map(function(e){e.documentStatus!==C.a.CANCELED&&2===e.documentTypeId&&a.push(e)}),{documents:a}}}]),Object(s.a)(t,[{key:"blur",value:function(){var e=this.props,t=e.updateValues,a=e.form;t&&t(a.getFieldsValue())}},{key:"changeProofType",value:function(e){this.setState({proofType:parseInt(e,10)})}},{key:"proofCancel",value:function(e){this.props.onRemoveDocument&&this.props.onRemoveDocument(e)}},{key:"proofRemove",value:function(e){var t=[];this.state.proofs&&this.state.proofs.map(function(a){a.uid!==e&&t.push(a)}),this.setState({proofs:t})}},{key:"proofChange",value:function(e){this.setState({proofs:[].concat(Object(j.a)(this.state.proofs),[e])})}},{key:"getBeneficiary",value:function(e){var t={address1:e.address1,address2:e.address2,city:e.city,country:e.country,isHosted:5===this.state.proofType,postcode:e.postcode,zipcode:e.zipcode,documents:[]};return this.state.proofs.map(function(a){t.documents.push({documentTypeId:2,file:a,name:a&&a.name,userId:e.userId})}),t}},{key:"later",value:function(){var e=this.props.form.getFieldsValue();this.props.onSave&&this.props.onSave(!1,this.getBeneficiary(e))}},{key:"submit",value:function(){var e=this,t=this.props.kycSetState;t({btnLoading:!0}),this.props.form.validateFields(function(){var a=Object(c.a)(o.a.mark(function a(r,n){var c,i,s,l,u;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r){a.next=18;break}if(c=e.state,i=c.proofType,s=c.documents,l=e.state.proofs.length+s.length,5!==i){a.next=10;break}if(!(l<3)){a.next=8;break}return t({btnLoading:!1}),e.setState({proofError:!0}),a.abrupt("return",!1);case 8:a.next=14;break;case 10:if(0!==l){a.next=14;break}return t({btnLoading:!1}),e.setState({proofError:!0}),a.abrupt("return",!1);case 14:u=e.getBeneficiary(n),e.props.onSave&&e.props.onSave(!0,u),a.next=19;break;case 18:t({btnLoading:!1});case 19:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.offValidateStep,a=e.offValidateLater;t&&t(this.handleSubmit),a&&a(this.handleLater)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.onValidateStep,a=e.onValidateLater;t&&t(this.handleSubmit),a&&a(this.handleLater)}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.intl,n=e.beneficiary,o=e.className,c=this.state,i=c.proofType,s=c.documents,l=n&&n.userTag&&JSON.parse(n.userTag),u=!1;return!i&&l&&l.isHosted&&(u=!0),5===i&&(u=!0),y.createElement(r.a,{method:"#",className:o,onSubmit:this.handleSubmit},y.createElement(O.a,null,y.createElement("div",{className:"kyc-subtitle"},y.createElement(E.b,{id:"kyc.personal_information.main_informations"}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{className:"gutter-box",span:16},y.createElement(S.o,{onBlur:this.handleBur,defaultValue:n&&n.address1,form:t,label:y.createElement(E.b,{id:"kyc.beneficiary.form_address1"}),id:"address1",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_address1_error"}),required:!0}]}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{className:"gutter-box",span:16},y.createElement(S.o,{onBlur:this.handleBur,defaultValue:n&&n.address2,form:t,label:y.createElement(E.b,{id:"kyc.beneficiary.form_address2"}),id:"address2",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_address2_error"})}]}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{className:"gutter-box",span:8},y.createElement(S.o,{onBlur:this.handleBur,defaultValue:n&&n.postcode,form:t,label:y.createElement(E.b,{id:"kyc.beneficiary.form_zipcode"}),id:"postcode",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_zipcode_error"}),required:!0}]})),y.createElement(g.a,{className:"gutter-box",span:8},y.createElement(S.o,{onBlur:this.handleBur,defaultValue:n&&n.city,form:t,label:y.createElement(E.b,{id:"kyc.beneficiary.form_city"}),id:"city",rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_city_error"}),required:!0}]}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{className:"gutter-box",span:16},y.createElement(S.c,{onBlur:this.handleBur,iso:!0,id:"country",form:t,defaultValue:n&&n.country,title:"kyc.beneficiary.form_country",error:"kyc.beneficiary.form_country_error"}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{span:16},!s||0===s.length&&y.createElement(S.k,{onBlur:this.handleBur,defaultValue:u?"5":"",showSearch:!0,id:"form_proof_id",label:y.createElement(E.b,{id:"kyc.beneficiary.form_proof_address"}),onChangeSelect:this.hanldeChangeProofType,rules:[{message:a.formatMessage({id:"kyc.beneficiary.form_proof_address_error"}),required:!0}],form:t,options:[y.createElement(S.g,{value:"1",key:"1"},"\xa0"),y.createElement(S.g,{value:"2",key:"2"},y.createElement(E.b,{id:"kyc.beneficiary.form_proof_address_type_1"})),y.createElement(S.g,{value:"3",key:"3"},y.createElement(E.b,{id:"kyc.beneficiary.form_proof_address_type_2"})),y.createElement(S.g,{value:"4",key:"4"},y.createElement(E.b,{id:"kyc.beneficiary.form_proof_address_type_3"})),y.createElement(S.g,{value:"5",key:"5"},y.createElement(E.b,{id:"kyc.beneficiary.form_proof_address_type_4"}))]}),u?y.createElement(y.Fragment,null,y.createElement(O.a,{gutter:25},y.createElement(g.a,{span:8},y.createElement(x.a,{documents:s&&s[0]?[s[0]]:[],documentsType:[2],hasError:this.state.proofError&&!s[0],onChange:this.handleProofChange,onRemove:this.handleProofRemove,onCancel:this.handleProofCancel,title:"kyc.beneficiary.form_btn_upload_proof_address_certificate_hosted",errorText:"kyc.beneficiary.form_btn_upload_proof_address_certificate_hosted_error"})),y.createElement(g.a,{span:8},y.createElement(x.a,{documents:s&&s[1]?[s[1]]:[],documentsType:[2],hasError:this.state.proofError&&!s[1],onChange:this.handleProofChange,onRemove:this.handleProofRemove,onCancel:this.handleProofCancel,title:"kyc.beneficiary.form_btn_upload_proof_id_hosted",errorText:"kyc.beneficiary.form_btn_upload_proof_id_hosted_error"})),y.createElement(g.a,{span:8},y.createElement(x.a,{documents:s&&s[2]?[s[2]]:[],documentsType:[2],hasError:this.state.proofError&&!s[2],onChange:this.handleProofChange,onRemove:this.handleProofRemove,onCancel:this.handleProofCancel,title:"kyc.beneficiary.form_btn_upload_proof_address_hosted",errorText:"kyc.beneficiary.form_btn_upload_proof_address_hosted_error"}))),!s||s.length<3&&y.createElement(y.Fragment,null,y.createElement(O.a,{gutter:55},y.createElement(g.a,{span:16},y.createElement(S.a,{onBlur:this.handleBur,id:"optin1",label:y.createElement(E.b,{id:"kyc.beneficiary.address_optin1_checkbox"}),rules:[{message:a.formatMessage({id:"kyc.beneficiary.address_optin1_checkbox_error"}),required:!0}],form:t}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{span:16},y.createElement(S.a,{onBlur:this.handleBur,id:"optin2",label:y.createElement(E.b,{id:"kyc.beneficiary.address_optin2_checkbox"}),rules:[{message:a.formatMessage({id:"kyc.beneficiary.address_optin2_checkbox_error"}),required:!0}],form:t}))),y.createElement(O.a,{gutter:55},y.createElement(g.a,{span:16},y.createElement(S.a,{onBlur:this.handleBur,id:"optin3",label:y.createElement(E.b,{id:"kyc.beneficiary.address_optin3_checkbox"}),rules:[{message:a.formatMessage({id:"kyc.beneficiary.address_optin3_checkbox_error"}),required:!0}],form:t}))))):y.createElement(y.Fragment,null,y.createElement(x.a,{documents:s,documentsType:[2],hasError:this.state.proofError,onChange:this.handleProofChange,onRemove:this.handleProofRemove,onCancel:this.handleProofCancel,title:"kyc.beneficiary.form_btn_upload_proof_address",errorText:"kyc.beneficiary.form_btn_upload_proof_address_error"}),!s||s.length<1&&y.createElement(O.a,{gutter:55},y.createElement(g.a,{span:16},y.createElement(S.a,{onBlur:this.handleBur,id:"optin",label:y.createElement(E.b,{id:"kyc.beneficiary.address_optin_checkbox"}),rules:[{message:a.formatMessage({id:"kyc.beneficiary.address_optin_checkbox_error"}),required:!0}],form:t}))))),y.createElement(g.a,{span:8,className:"onboarding-form-hint"},y.createElement("div",{className:"kyc-hint-title"},y.createElement(E.b,{id:"kyc.beneficiary.hint_title"})),y.createElement("div",{className:"kyc-hint-description"},y.createElement(E.a,{id:"kyc.beneficiary.hint_proof_address"})))),y.createElement(O.a,null))}}]),t}(y.PureComponent),w=Object(v.compose)(r.a.create({}),E.e,L.b(),k.b())(P),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={btnDisabled:!1},a.handleProofChange=a.proofChange.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.submit.bind(Object(f.a)(Object(f.a)(a))),a.handleRemoveDocument=a.removeDocument.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"removeDocument",value:function(e){var t=this.props.removeDocument;t&&t(e)}},{key:"proofChange",value:function(e){this.setState({proof:e,proofError:!e})}},{key:"later",value:function(){var e=Object(c.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"submit",value:function(){var e=Object(c.a)(o.a.mark(function e(a,r){var n,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a||Object(d.a)(Object(u.a)(t.prototype),"later",this).call(this),n=this.props,n.baseUrl,c=n.saveBeneficiary,n.tempBeneficiary,n.currentStep,!c){e.next=5;break}return e.next=5,c(r);case 5:a&&this.save();case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this.props,t=e.currentStep,a=(e.nextStep,e.baseUrl),r=e.tempBeneficiary,n=e.kycSetState,o="".concat(t,"_PART_3"),c="".concat(a,"/part-3");r&&3===r.employeeType&&(o="".concat(t,"_PART_4"),c="".concat(a,"/part-4")),n&&n({bottomBar:!0,btn:"kyc.bottom.confirm",btnLater:"kyc.bottom.later",btnLaterLink:"/",btnLink:c,nextStep:o,step:"".concat(t,"_PART_2")})}},{key:"render",value:function(){var e=this.props,a=e.tempBeneficiary,r=e.location,n=(e.baseUrl,e.values),o=r.pathname.replace(/\//g,".").replace(/-/g,"_").substr(1);return Object(d.a)(Object(u.a)(t.prototype),"_render",this).call(this,y.createElement("div",{className:"kyc-personal-info-2"},y.createElement("div",null,y.createElement(m.f,{titleVariables:{firstname:n.firstname||"",lastname:n.lastname||""},title:"".concat(o,"_title"),description:"".concat(o,"_description")})),y.createElement(w,{onRemoveDocument:this.handleRemoveDocument,onSave:this.handleSubmit,beneficiary:a})))}}]),t}(_.a);N.defaultProps={};t.default=Object(v.compose)(h.b(),r.a.create({}),L.b(),b.c(),k.b(),E.e)(N)},770:function(e,t,a){"use strict";var r=a(11),n=a.n(r),o=a(22),c=a(8),i=a(14),s=a(9),l=a(7),u=a(10),d=a(16),p=a(56),f=a(0),m=a(62),h=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={},a.handleLater=a.later.bind(Object(d.a)(Object(d.a)(a))),a.handleSave=a.save.bind(Object(d.a)(Object(d.a)(a))),a.handleError=a.onError.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"load",value:function(){this.props.kycSetState&&this.props.kycSetState({btnLoading:!0})}},{key:"later",value:function(){var e=Object(o.a)(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.props.kyc.btnLaterLink)&&m.a.push(t),e.abrupt("return",!0);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onError",value:function(){var e=Object(o.a)(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.kycSetState&&this.props.kycSetState({btnLaterLoading:!1,btnLoading:!1});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(o.a)(n.a.mark(function e(){var t,a,r,o,c,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.company,r=t.kycSetState,o=t.kyc,c=o.nextStep,i=o.btnLink,r({btnLoading:!0}),!c||!a){e.next=5;break}return e.next=5,a.step(c);case 5:return r({btnLoading:!1}),i&&m.a.push(i),e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.offValidateStep,a=e.offValidateLater;t&&t(this.handleSave),a&&a(this.handleLater)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.onValidateStep,a=e.onValidateLater;t&&t(this.handleSave),a&&a(this.handleLater),this.props.kycSetState&&this.props.kycSetState(this.props.kycProps)}},{key:"_render",value:function(e){var t=this.props,a=t.kycProps,r=t.user,n=r&&r.data&&r.data.me,o=n&&n.currentCompany&&(n.currentCompany.name||n.currentCompany.brandName),c=a&&a.headingTitle,i=a&&a.headingDescription;return f.createElement("div",{className:"kyc-children"},c&&f.createElement("div",null,f.createElement(p.f,{titleVariables:{company:o},title:c,description:i})),e)}}]),t}(f.PureComponent);h.defaultProps={},t.a=h},773:function(e,t,a){"use strict";var r=a(7);function n(e,t,a){return(n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}a.d(t,"a",function(){return n})},780:function(e,t,a){"use strict";var r,n;a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n}),function(e){e.PENDING="PENDING",e.CANCELED="CANCELED",e.VALIDATED="VALIDATED"}(r||(r={})),function(e){e.M="M",e.MME="MME",e.MLLE="MLLE"}(n||(n={}))},792:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=792},805:function(e,t,a){},807:function(e,t,a){"use strict";var r=a(57),n=a(11),o=a.n(n),c=a(22),i=a(271),s=a(30),l=a(28),u=a(270),d=a(0),p=a(272),f=a(21),m=a(804),h=(a(808),d.useState);t.a=function(e){var t=e.onChange,a=e.onRemove,n=e.defaultPreview,b=e.hasError,y=e.errorText,v=e.title,E=h(void 0),k=Object(i.a)(E,2),_=k[0],g=k[1],O=h(n),j=Object(i.a)(O,2),S=j[0],C=j[1],x=function(){return{abort:function(){}}},L=function(){var e=Object(c.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(o.a.mark(function e(a){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FileReader).readAsDataURL(a),r.onloadend=function(){C(r.result),g(a),t&&t(a,r.result)};case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(o.a.mark(function e(t,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P(t),e.abrupt("return",!1);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),N=function(){"undefined"!==typeof _&&a&&a(_.uid),C(void 0),g(void 0)};return d.createElement("div",{className:"local-upload-outer ".concat(b?" has-error":"")},d.createElement(p.a,{maxSize:1e7,accept:"image/jpeg, image/jpg, image/png, application/pdf, image/bmp, image/gif, image/png",onDrop:function(){},onDropAccepted:L},function(e){var t=e.getRootProps,a=e.isDragActive;return Object(r.a)(e,["getRootProps","isDragActive"]),d.createElement("div",Object.assign({},t({}),{className:"local-upload-wrapper active".concat(b?" has-error":"").concat(a?" upload-visible":"upload-hidden")}),S?d.createElement("div",{className:"local-upload-preview"},d.createElement(s.a,{onClick:N,className:"local-upload-preview-close",value:l.a.Cross}),d.createElement("div",{className:"preview-content"},S.indexOf("data:application/pdf;base64")>-1?d.createElement(m.a,{file:S}):d.createElement("img",{src:S}))):d.createElement(u.a,{active:!0,small:!0,multiple:!1,title:v,extension:"kyc.beneficiary.upload_extension",onCustomRequest:x,onBeforeUpload:w}))}),d.createElement("div",{className:"ant-form-explain"},b&&y&&d.createElement(f.b,{id:y})))}},808:function(e,t,a){},823:function(e,t){},824:function(e,t){},825:function(e,t){},826:function(e,t){},827:function(e,t){},835:function(e,t,a){"use strict";var r=a(57),n=a(8),o=a(14),c=a(9),i=a(7),s=a(10),l=a(30),u=a(28),d=a(807),p=a(780),f=a(0),m=(a(805),function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hasError,a=e.documents,n=e.onCancel,o=e.documentsType,c=e.children,i=e.childrenAfter,s=Object(r.a)(e,["hasError","documents","onCancel","documentsType","children","childrenAfter"]),m=[];return a&&a.map(function(e,t){o&&e.documentTypeId&&e.documentStatus!==p.a.CANCELED&&o.indexOf(e.documentTypeId)>-1&&m.push(e)}),f.createElement("div",{className:"proof-outer ".concat(t?" has-error":"")},m.map(function(e,t){return f.createElement("div",{className:"document-proof",key:"".concat(t)},e.documentStatus===p.a.PENDING&&f.createElement(l.a,{value:u.a.Clock}),e.documentStatus===p.a.VALIDATED&&f.createElement(l.a,{value:u.a.Checkmark}),e.fileName,f.createElement("div",{onClick:n&&n.bind(null,e.documentId),className:"document-proof-remove"},f.createElement(l.a,{value:u.a.Cross})))}),!m||0===m.length&&f.createElement(f.Fragment,null,!i&&c,f.createElement(d.a,Object.assign({hasError:t},s)),i&&c))}}]),t}(f.PureComponent));m.defaultProps={},t.a=m}}]);
//# sourceMappingURL=15.a286a8df.chunk.js.map