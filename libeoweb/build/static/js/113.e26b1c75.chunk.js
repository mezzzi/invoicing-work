(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1259:function(e,n,r){},1309:function(e,n,r){"use strict";r.r(n);r(1259);var t=r(8),i=r(14),a=r(9),c=r(7),u=r(10),s=r(36),o=r(778),p=r(0),f=r(776),b=p.lazy(function(){return r.e(119).then(r.bind(null,1302))}),l=p.lazy(function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(14)]).then(r.bind(null,1312))}),d=p.lazy(function(){return Promise.all([r.e(0),r.e(15)]).then(r.bind(null,1313))}),m=p.lazy(function(){return r.e(16).then(r.bind(null,1314))}),v=p.lazy(function(){return Promise.all([r.e(0),r.e(17)]).then(r.bind(null,1315))}),y=function(e){function n(){return Object(t.a)(this,n),Object(a.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(u.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return p.createElement(o.a,{representatives:!0,beneficiaries:!0},p.createElement(f.a,{baseUrl:"/kyc/beneficiary",nextUrl:"/kyc/beneficiary",currentStep:"BENEFICIARIES",nextStep:"BENEFICIARIES"},p.createElement(s.b,{exact:!0,path:"/kyc/beneficiary",component:b}),p.createElement(s.b,{path:"/kyc/beneficiary/part-1",component:l}),p.createElement(s.b,{path:"/kyc/beneficiary/part-2",component:d}),p.createElement(s.b,{path:"/kyc/beneficiary/part-3",component:m}),p.createElement(s.b,{path:"/kyc/beneficiary/part-4",component:v})))}}]),n}(p.PureComponent);n.default=y},776:function(e,n,r){"use strict";var t=r(24),i=r(11),a=r.n(i),c=r(22),u=r(8),s=r(14),o=r(9),p=r(7),f=r(10),b=r(778),l=r(0),d=r(29),m=l.createContext({baseUrl:"",currentStep:void 0,currentUserId:void 0,employeeType:void 0,isCurrent:void 0,nextStep:void 0,nextUrl:"",removeBeneficiary:function(){},removeDocument:function(){},saveBeneficiary:function(){},tempBeneficiary:void 0,type:void 0,updateTempBeneficiary:function(){},updateValues:function(){},values:{}}),v=m.Consumer,y=function(e){function n(){var e,r;Object(u.a)(this,n);for(var i=arguments.length,s=new Array(i),f=0;f<i;f++)s[f]=arguments[f];return(r=Object(o.a)(this,(e=Object(p.a)(n)).call.apply(e,[this].concat(s)))).state={baseUrl:"",currentStep:void 0,currentUserId:void 0,employeeType:void 0,isCurrent:void 0,nextStep:void 0,nextUrl:"",removeBeneficiary:function(){var e=Object(c.a)(a.a.mark(function e(n){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=r.props.beneficiaries&&r.props.beneficiaries.remove)||!n){e.next=4;break}return e.next=4,t(n);case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),removeDocument:function(){var e=Object(c.a)(a.a.mark(function e(n){var i,c,u,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.state.tempBeneficiary,!(c=r.props.beneficiaries&&r.props.beneficiaries.removeDocument)){e.next=10;break}return e.next=5,c(n);case 5:if(u=e.sent,s=[],!(u&&i&&i.documents)){e.next=10;break}return i.documents.rows.map(function(e){e.documentId!==u.documentId&&s.push(u)}),e.abrupt("return",r.setState({tempBeneficiary:Object(t.a)({},i,{documents:s})}));case 10:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),saveBeneficiary:function(){var e=Object(c.a)(a.a.mark(function e(n){var i,c,u,s,o,p,f,b;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.getBeneficiary(),c=r.state.currentUserId||i&&i.userId,u=i&&i.userTag&&JSON.parse(i.userTag),s=!1,n&&"undefined"!==typeof n.isHosted?s=n.isHosted:u&&u.isHosted&&(s=u.isHosted),(o=Object(t.a)({},n,{isCurrentUser:r.props.isCurrent,isHosted:s,userId:c})).userId||(o.employeeType=r.state.employeeType),delete n.__typename,!(p=r.props.beneficiaries&&r.props.beneficiaries.create)||!n){e.next=14;break}return e.next=12,p(o);case 12:(f=e.sent)&&(b=f.userId,r.setState({currentUserId:b}));case 14:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),tempBeneficiary:void 0,type:void 0,updateTempBeneficiary:function(){var e=Object(c.a)(a.a.mark(function e(n,t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setState({currentUserId:n,employeeType:t}));case 1:case"end":return e.stop()}},e)}));return function(n,r){return e.apply(this,arguments)}}(),updateValues:function(e){r.setState({values:e})},values:{}},r}return Object(f.a)(n,e),Object(s.a)(n,[{key:"getBeneficiaryById",value:function(e){var n=this.props.beneficiaries&&this.props.beneficiaries.beneficiaries&&this.props.beneficiaries.beneficiaries.beneficiaries&&this.props.beneficiaries.beneficiaries.beneficiaries.rows;return this.props.beneficiaries&&n&&n.find(function(n){return e===n.userId&&n})}},{key:"getBeneficiaryCurrent",value:function(){var e=this.props.beneficiaries&&this.props.beneficiaries.beneficiaries&&this.props.beneficiaries.beneficiaries.beneficiaries&&this.props.beneficiaries.beneficiaries.beneficiaries.rows;return this.props.beneficiaries&&e&&e.find(function(e){return e.userTag&&JSON.parse(e.userTag).userId})}},{key:"getBeneficiary",value:function(){var e,n=this.state.currentUserId,r=this.props.isCurrent;return!n&&r?(e=this.getBeneficiaryCurrent())&&e.userId&&(n=e.userId):n&&(e=this.getBeneficiaryById(n)),e}},{key:"render",value:function(){var e=this.state.values,n=this.getBeneficiary();return l.createElement(m.Provider,{value:Object(t.a)({},this.state,{baseUrl:this.props.baseUrl,currentStep:this.props.currentStep,isCurrent:this.props.isCurrent,nextStep:this.props.nextStep,nextUrl:this.props.nextUrl,tempBeneficiary:n,values:Object(t.a)({},n,e)})},this.props.children)}}]),n}(l.PureComponent),h=Object(d.compose)(b.b())(y),O=(r(106),function(){return function(e){return function(n){function r(){return Object(u.a)(this,r),Object(o.a)(this,Object(p.a)(r).apply(this,arguments))}return Object(f.a)(r,n),Object(s.a)(r,[{key:"render",value:function(){var n=this;return l.createElement(v,null,function(r){return l.createElement(e,Object.assign({},n.props,r))})}}]),r}(l.Component)}});r.d(n,"a",function(){return h}),r.d(n,"b",function(){return O})},778:function(e,n,r){"use strict";var t=r(11),i=r.n(t),a=r(22),c=r(0),u=c.createContext({beneficiaries:{create:function(){var e=Object(a.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),remove:function(){},removeDocument:function(){var e=Object(a.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),representatives:void 0}}),s=u.Provider,o=u.Consumer,p=r(8),f=r(14),b=r(9),l=r(7),d=r(10),m=(r(106),function(){return function(e){return function(n){function r(){return Object(p.a)(this,r),Object(b.a)(this,Object(l.a)(r).apply(this,arguments))}return Object(d.a)(r,n),Object(f.a)(r,[{key:"render",value:function(){var n=this;return c.createElement(o,null,function(r){return c.createElement(e,Object.assign({},n.props,r))})}}]),r}(c.Component)}}),v=r(24),y=r(51),h=r(29),O=r(31),j=r(32),B=r.n(j);function w(){var e=Object(O.a)(["\nfragment representative on Representative {\n  ","\n}"]);return w=function(){return e},e}function x(){var e=Object(O.a)(["\n","\n\nfragment beneficiary on Beneficiary {\n  ","\n}"]);return x=function(){return e},e}function k(){var e=Object(O.a)(["\n\nfragment document on Document {\n  ","\n}"]);return k=function(){return e},e}var I="\n  documentId\n  documentTag\n  documentStatus\n  documentTypeId\n  documentType\n  residenceId\n  clientId\n  userId\n  userLastname\n  userFirstname\n  fileName\n  temporaryUrl\n  temporaryUrlThumb\n  createdDate\n  modifiedDate\n",g=B()(k(),I),S={beneficiary:{fragment:B()(x(),g,"\n  userId\n  title\n  firstname\n  lastname\n  nationality\n  placeOfBirth\n  userStatus\n  birthCountry\n  employeeType\n  userTag\n  birthday\n  specifiedUSPerson\n  incomeRange\n  personalAssets\n  occupation\n  controllingPersonType\n  phone\n  address1\n  address2\n  postcode\n  city\n  country\n  taxResidence\n"),query:"\n  ...beneficiary\n  documents {\n    total\n    rows {\n      ...document\n    }\n  }\n"},document:{fragment:g,query:I},representative:{fragment:B()(w(),"\n  firstname\n  lastname\n  fullnames\n  birthday\n  parentType\n  userTypeId\n"),query:"\n  ...representative\n"}};function U(){var e=Object(O.a)(["\n  mutation removeDocument($id: Int!) {\n    removeDocument(id: $id) {\n      ","\n    }\n  }\n"]);return U=function(){return e},e}function C(){var e=Object(O.a)(["\n  ","\n\n  mutation removeBeneficiary($id: Int!) {\n    removeBeneficiary(id: $id) {\n      ","\n    }\n  }\n"]);return C=function(){return e},e}function T(){var e=Object(O.a)(["\n  ","\n\n  mutation createBeneficiary($input: BeneficiaryInput!) {\n    createBeneficiary(input: $input) {\n      ","\n    }\n  }\n"]);return T=function(){return e},e}function E(){var e=Object(O.a)(["\n  ","\n\n  query representatives {\n    representatives {\n      total\n      rows {\n        ","\n      }\n    }\n  }\n"]);return E=function(){return e},e}function q(){var e=Object(O.a)(["\n  ","\n\n  query beneficiaries {\n    beneficiaries {\n      total\n      rows {\n        ","\n      }\n    }\n  }\n"]);return q=function(){return e},e}var D=B()(q(),S.beneficiary.fragment,S.beneficiary.query),P=B()(E(),S.representative.fragment,S.representative.query),R=B()(T(),S.beneficiary.fragment,S.beneficiary.query),A=B()(C(),S.beneficiary.fragment,S.beneficiary.query),$=B()(U(),S.document.query),z=function(e){function n(){var e,r;Object(p.a)(this,n);for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return(r=Object(b.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(c)))).state={beneficiaries:{create:function(){var e=Object(a.a)(i.a.mark(function e(n){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"US"===n.country||"US"===n.birthCountry||"US"===n.nationality?n.specifiedUSPerson=1:n.specifiedUSPerson=0,e.prev=1,e.next=4,r.props.createBeneficiary({update:function(e,r){var t=r.data;if(!n.userId){var i=e.readQuery({query:D,variables:{limit:100,offset:0}});e.writeQuery({data:{beneficiaries:Object(v.a)({},i.beneficiaries,{rows:[t.createBeneficiary].concat(i.beneficiaries.rows),total:i.beneficiaries.total+1})},query:D,variables:{limit:100,offset:0}})}},variables:{input:n}});case 4:if(t=e.sent,a=t.data.createBeneficiary,!t.errors){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(a.a)(i.a.mark(function e(n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.props.removeBeneficiary({variables:{id:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}},e,null,[[0,5]])}));return function(n){return e.apply(this,arguments)}}(),removeDocument:function(){var e=Object(a.a)(i.a.mark(function e(n){var t,a,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.props.removeDocument({variables:{id:n}});case 3:if(t=e.sent,a=t.errors,c=t.data,!a){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",c.removeDocument);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(n){return e.apply(this,arguments)}}()}},r}return Object(d.a)(n,e),Object(f.a)(n,[{key:"render",value:function(){var e=this.props,n=e.dataRepresentatives,r=e.dataBeneficiaries;return c.createElement(s,{value:{beneficiaries:Object(v.a)({},this.state.beneficiaries,{beneficiaries:r||void 0,representatives:n||void 0})}},this.props.children)}}]),n}(c.PureComponent),H=Object(h.compose)(h.withApollo,y.b(),Object(h.graphql)(D,{options:function(e){return{variables:{limit:100,offset:0}}},props:function(e){return{dataBeneficiaries:e.data}},skip:function(e){return!e.beneficiaries}}),Object(h.graphql)(P,{props:function(e){return{dataRepresentatives:e.data}},skip:function(e){return!e.representatives}}),Object(h.graphql)(A,{name:"removeBeneficiary"}),Object(h.graphql)(R,{name:"createBeneficiary"}),Object(h.graphql)($,{name:"removeDocument"}))(z);r.d(n,"a",function(){return H}),r.d(n,"b",function(){return m})}}]);
//# sourceMappingURL=113.e26b1c75.chunk.js.map