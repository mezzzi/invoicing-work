(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1284:function(e,n,a){"use strict";a.r(n);a(166);var t=a(107),r=(a(131),a(43)),c=(a(97),a(50)),u=a(11),s=a.n(u),o=a(22),i=a(8),d=a(9),l=a(7),b=a(14),m=a(10),p=a(28),f=a(88),v=a(771),k=a(849),h=a(266),O=a(108),j=a(56),g=a(813),y=a(52),E=a(0),w=a(29),A=a(21),x=a(609),q=a(62),M=(a(810),function(e){function n(e){var a;return Object(i.a)(this,n),(a=Object(d.a)(this,Object(l.a)(n).call(this,e))).state={mandateId:void 0,modalVisible:!1},a.submit=function(){var e=Object(o.a)(s.a.mark(function e(n,t,r){var c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&r.preventDefault(),!n||!t){e.next=6;break}return e.next=4,t(n);case 4:(c=e.sent)&&a.setState({mandateId:c.id,modalVisible:!0});case 6:case"end":return e.stop()}},e)}));return function(n,a,t){return e.apply(this,arguments)}}(),a.later=function(){q.a.push("/company/bank")},a.close=function(){var e=Object(o.a)(s.a.mark(function e(n,t,r){var c,u,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.state.mandateId,u=a.props.match,o=u&&u.params&&u.params.bankId,a.setState({modalVisible:!1}),!(r&&c&&n)){e.next=14;break}return e.next=7,n(c,r);case 7:if(i=e.sent,!t){e.next=11;break}return e.next=11,t();case 11:i&&q.a.push("/company/bank/mandate/view/".concat(o)),e.next=17;break;case 14:if(!t){e.next=17;break}return e.next=17,t();case 17:case"end":return e.stop()}},e)}));return function(n,a,t){return e.apply(this,arguments)}}(),a}return Object(m.a)(n,e),Object(b.a)(n,null,[{key:"getDerivedStateFromProps",value:function(e,n){var a=e.match;if(!n.mandateId){var t=a&&a.params&&a.params.mandateId;if(t)return{mandateId:t}}return null}}]),Object(b.a)(n,[{key:"render",value:function(){var e=this,n=this.props,a=n.user,u=n.intl,s=n.form,o=this.state,i=o.modalVisible,d=o.mandateId,l=this.props.match,b=l&&l.params&&l.params.bankId,m=(l&&l.params&&l.params.id,a&&a.data&&a.data.me),y=m&&m.currentCompany;return E.createElement(O.b,null,E.createElement(c.a,{type:"flex"},E.createElement(j.f,{icon:p.a.Wallet,title:"bank.mandate_add.title",description:top.location.href.indexOf("?bank")>-1?"bank.mandate_add.save_and_description":"bank.mandate_add.description"})),y&&E.createElement(g.b,{id:b},E.createElement(g.a,null,function(n){var a=n.bank,o=a&&a.createMandate,l=a&&a.generateCode,m=a&&a.sign,p=a&&a.bankAccount&&a.bankAccount.bankAccount;a&&a.bankAccount&&a.bankAccount.refetch;return E.createElement(E.Fragment,null,i&&E.createElement(k.b,{onComplete:e.close.bind(null,m,a&&a.bankAccount&&a.bankAccount.refetch),id:d,generateCode:l,onCancel:e.close.bind(null,void 0,a&&a.bankAccount&&a.bankAccount.refetch),visible:i}),E.createElement(v.a,{primary:!0,center:!1},E.createElement(j.e,null,E.createElement(A.b,{id:"bank.mandate_add_form.title"})),E.createElement(j.b,{className:"heading-description"},E.createElement(A.b,{id:"bank.mandate_add_form.description"})),E.createElement(j.e,{css:{primaryColor:!0,uppercase:!0}},E.createElement(A.b,{id:"bank.mandate.subtitle"})),E.createElement(t.a,{className:"form-mandate",onSubmit:e.submit.bind(null,b,o)},E.createElement(c.a,{gutter:28},E.createElement(r.a,{span:8},E.createElement(h.o,{disabled:!0,id:"name",defaultValue:y.name||y.brandName,label:E.createElement(A.b,{id:"bank.mandate.name"}),rules:[{message:u.formatMessage({id:"bank.mandate.name_error"}),required:!0}],form:s}))),E.createElement(c.a,{gutter:28},E.createElement(r.a,{span:8},E.createElement(h.o,{disabled:!0,id:"address1",defaultValue:y.addresses&&y.addresses.rows&&y.addresses.rows[0]&&y.addresses.rows[0].address1,label:E.createElement(A.b,{id:"bank.mandate.address1"}),rules:[{message:u.formatMessage({id:"bank.mandate.address1_error"}),required:!0}],form:s})),E.createElement(r.a,{span:8},E.createElement(h.o,{disabled:!0,id:"city",defaultValue:y.addresses&&y.addresses.rows&&y.addresses.rows[0]&&y.addresses.rows[0].city,label:E.createElement(A.b,{id:"bank.mandate.city"}),rules:[{message:u.formatMessage({id:"bank.mandate.city_error"}),required:!0}],form:s}))),E.createElement(c.a,{gutter:28},E.createElement(r.a,{span:8},E.createElement(h.o,{disabled:!0,id:"zipcode",defaultValue:y.addresses&&y.addresses.rows&&y.addresses.rows[0]&&y.addresses.rows[0].zipcode,label:E.createElement(A.b,{id:"bank.mandate.zipcode"}),rules:[{message:u.formatMessage({id:"bank.mandate.zipcode_error"}),required:!0}],form:s})),E.createElement(r.a,{span:8},E.createElement(h.o,{disabled:!0,id:"country",defaultValue:y.addresses&&y.addresses.rows&&y.addresses.rows[0]&&y.addresses.rows[0].country,label:E.createElement(A.b,{id:"bank.mandate.country"}),rules:[{message:u.formatMessage({id:"bank.mandate.country_error"}),required:!0}],form:s}))),E.createElement(c.a,{gutter:28},E.createElement(r.a,{span:16},E.createElement(h.o,{id:"iban",defaultValue:p&&p.iban&&p.iban.iban,disabled:!0,label:E.createElement(A.b,{id:"bank.mandate.iban"}),form:s}))),E.createElement(c.a,{gutter:28},E.createElement(r.a,{span:8},E.createElement(h.o,{id:"bic",defaultValue:p&&p.iban&&p.iban.bic,disabled:!0,label:E.createElement(A.b,{id:"bank.mandate.bic"}),form:s})),E.createElement(r.a,{span:8},E.createElement(h.o,{id:"bankName",disabled:!0,defaultValue:p&&p.iban&&p.iban.bank,label:E.createElement(A.b,{id:"bank.mandate.bank_name"}),form:s})))),E.createElement(x.a,{to:"/company/informations"},E.createElement(j.a,null,E.createElement(A.b,{id:"bank.mandate.link_edit"})))),E.createElement(O.d,{style:{justifyContent:"flex-end"},visible:!0},E.createElement(f.c,{onClick:e.later,style:{marginRight:50},type:f.b.Default},E.createElement(A.b,{id:"bank.mandate.later"})),E.createElement(f.c,{onClick:e.submit.bind(null,b,o),style:{marginRight:50},type:f.b.Primary},E.createElement(A.b,{id:"bank.mandate.submit"}))))})))}}]),n}(E.PureComponent));n.default=Object(w.compose)(A.e,y.b(),t.a.create({}))(M)},765:function(e,n,a){"use strict";a(331);var t=a(247),r=(a(330),a(167)),c=a(57),u=a(8),s=a(14),o=a(9),i=a(7),d=a(10),l=a(30),b=a(28),m=a(0),p=function(e){function n(){var e,a;Object(u.a)(this,n);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(i.a)(n)).call.apply(e,[this].concat(r)))).onRemove=function(e){e.stopPropagation(),e.preventDefault();var n=a.props.onRemove;n&&n()},a}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this.props,n=e.avatar,a=e.center,u=e.children,s=e.className,o=e.onClose,i=e.editable,d=e.onEdit,p=e.removable,f=e.shadow,v=e.title,k=e.primary,h=e.titleAlign,O=Object(c.a)(e,["avatar","center","children","className","onClose","editable","onEdit","removable","shadow","title","primary","titleAlign"]);return m.createElement(t.a,Object.assign({className:"card-item".concat(a?" center ":"").concat(f?" shadow ":"").concat(k?" primary ":"").concat(s?" ".concat(s):"")},O),o&&m.createElement("div",{onClick:o,className:"card-close"},m.createElement(l.a,{value:b.a.Cross})),i&&m.createElement("div",{onClick:d,className:"card-edit"},m.createElement(l.a,{value:b.a.Pencil})),p&&m.createElement("div",{onClick:this.onRemove,className:"card-remove"},m.createElement(l.a,{value:b.a.Trash})),n&&m.createElement(r.a,{className:"card-avatar"},n),v&&m.createElement("div",{className:"card-title".concat(h?" ".concat(h):"")},v),m.createElement("div",{className:"card-children"},u))}}]),n}(m.PureComponent);n.a=p},768:function(e,n,a){"use strict";var t=a(30),r=a(246),c=a(0),u=a(21),s=a(765);n.a=function(e){var n=e.className,a=e.center,o=e.title,i=e.description,d=e.icon,l=e.style,b=e.loading,m=e.color;return c.createElement(s.a,{style:l,center:a,className:"condensed-card".concat(n?" ".concat(n):""),shadow:!0},c.createElement("div",{className:"condensed-card-left"},c.createElement(r.a.Bloc,{loading:Boolean(b),className:"condensed-card-title"},o),i&&c.createElement(r.a.Bloc,{loading:Boolean(b),className:"condensed-card-description"},c.createElement(u.b,{id:i}))),c.createElement("div",{className:"condensed-card-right".concat(m?" ".concat(m):"")},c.createElement(t.a,{value:d})))}},769:function(e,n,a){"use strict";a(97);var t=a(50),r=(a(131),a(43)),c=a(8),u=a(14),s=a(9),o=a(7),i=a(10),d=a(0),l=function(e){function n(){return Object(c.a)(this,n),Object(s.a)(this,Object(o.a)(n).apply(this,arguments))}return Object(i.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.className,a=e.title,c=e.rows,u=e.renderRow;return d.createElement(t.a,{className:"".concat(n?"className ":"")},d.createElement("div",{className:"card-row-title"},a),c&&c.map(function(e,n){return d.createElement(r.a,{className:"card-row-item",key:"".concat(n)},u?u(e):e)}))}}]),n}(d.PureComponent);n.a=l},771:function(e,n,a){"use strict";a(774);var t=a(765);a.d(n,"a",function(){return t.a});var r=a(768);a.d(n,"c",function(){return r.a});var c=a(769);a.d(n,"b",function(){return c.a})},774:function(e,n,a){},810:function(e,n,a){},813:function(e,n,a){"use strict";var t=a(11),r=a.n(t),c=a(22),u=a(0),s=u.createContext({bank:{bankAccount:void 0,bankAccounts:void 0,changeDefaultBankAccount:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),createMandate:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),createOrUpdate:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),generateCode:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),removeBankAccount:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),removeMandate:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),sign:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}}),o=s.Provider,i=s.Consumer,d=a(8),l=a(14),b=a(9),m=a(7),p=a(10),f=(a(106),a(44)),v=a(24),k=a(51),h=a(29),O=a(41),j=a(31),g=a(32),y=a.n(g),E=a(45),w=a(168),A=a(61);function x(){var e=Object(j.a)(["\n","\n\nfragment mandate on Mandate {\n  ","\n}"]);return x=function(){return e},e}function q(){var e=Object(j.a)(["\n","\n","\n\nfragment bankAccount on BankAccount {\n  ","\n}"]);return q=function(){return e},e}var M="\n  id\n  treezorMandateId\n  filePath\n  status\n  rum\n  signatoryIp\n  signaturedAt\n  createdAt\n  updatedAt\n",B={bank:{fragment:y()(q(),w.a.fragment,A.a.fragment,"\n  id\n  label\n  default\n  enabled\n"),query:"\n  ...bankAccount\n  company {\n    ".concat(E.a.standalone,"\n  }\n  iban {\n    ").concat(w.a.query,"\n  }\n  mandates {\n    ").concat(M,"\n    signatory {\n      ").concat(A.a.query,"\n    }\n  }\n")},mandate:{fragment:y()(x(),A.a.fragment,M),query:"\n  ...mandate\n  signatory {\n    ".concat(A.a.query,"\n  }\n")}};function C(){var e=Object(j.a)(["\n  ","\n\n  mutation removeMandate($id: ID!) {\n    removeMandate(id: $id) {\n      ","\n    }\n  }\n"]);return C=function(){return e},e}function I(){var e=Object(j.a)(["\n  ","\n\n  mutation signedMandate($id: ID!, $code: String!) {\n    signedMandate(id: $id, code: $code) {\n      ","\n    }\n  }\n"]);return I=function(){return e},e}function N(){var e=Object(j.a)(["\n  ","\n\n  mutation generateCodeMandate($id: ID!) {\n    generateCodeMandate(id: $id) {\n      ","\n    }\n  }\n"]);return N=function(){return e},e}function _(){var e=Object(j.a)(["\n  ","\n\n  query mandate($id: ID!) {\n    mandate(id: $id) {\n      ","\n    }\n  }\n"]);return _=function(){return e},e}function $(){var e=Object(j.a)(["\n  ","\n\n  mutation createMandate($bankAccountId: ID!) {\n    createMandate(bankAccountId: $bankAccountId) {\n      ","\n    }\n  }\n"]);return $=function(){return e},e}function D(){var e=Object(j.a)(["\n  ","\n\n  mutation removeBankAccount($id: ID!) {\n    removeBankAccount(id: $id) {\n      ","\n    }\n  }\n"]);return D=function(){return e},e}function V(){var e=Object(j.a)(["\n  ","\n\n  mutation changeDefaultBankAccount($id: ID!) {\n    changeDefaultBankAccount(id: $id) {\n      ","\n    }\n  }\n"]);return V=function(){return e},e}function P(){var e=Object(j.a)(["\n  ","\n\n  query bankAccount($id: ID!) {\n    bankAccount(id: $id) {\n      ","\n    }\n  }\n"]);return P=function(){return e},e}function U(){var e=Object(j.a)(["\n  ","\n\n  mutation createOrUpdateBankAccount($input: BankAccountInput!, $id: ID) {\n    createOrUpdateBankAccount(input: $input, id: $id) {\n      ","\n    }\n  }\n"]);return U=function(){return e},e}function R(){var e=Object(j.a)(["\n  ","\n\n  query bankAccounts {\n    bankAccounts {\n      total\n      rows {\n        ","\n      }\n    }\n  }\n"]);return R=function(){return e},e}var z=y()(R(),B.bank.fragment,B.bank.query),S=y()(U(),B.bank.fragment,B.bank.query),F=y()(P(),B.bank.fragment,B.bank.query),J=y()(V(),B.bank.fragment,B.bank.query),Q=y()(D(),B.bank.fragment,B.bank.query),T=y()($(),B.mandate.fragment,B.mandate.query),W=(y()(_(),B.mandate.fragment,B.mandate.query),y()(N(),B.mandate.fragment,B.mandate.query)),G=y()(I(),B.mandate.fragment,B.mandate.query),H=y()(C(),B.mandate.fragment,B.mandate.query),K=function(e){function n(){var e,a;Object(d.a)(this,n);for(var t=arguments.length,u=new Array(t),s=0;s<t;s++)u[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(u)))).state={bank:{bankAccount:void 0,bankAccounts:void 0,changeDefaultBankAccount:function(){var e=Object(c.a)(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.changeDefaultBankAccount({variables:{id:n}});case 3:return t=e.sent,Object(O.a)(a.props.alert,Object(O.b)(t.errors),["bank.form.success_change_default"]),e.abrupt("return",t.data&&t.data.changeDefaultBankAccount);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(a.props.alert,Object(O.b)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(n){return e.apply(this,arguments)}}(),createMandate:function(){var e=Object(c.a)(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.createMandate({variables:{bankAccountId:n}});case 3:return t=e.sent,Object(O.a)(a.props.alert,Object(O.b)(t.errors),["bank.mandate.success_create"]),e.abrupt("return",t.data&&t.data.createMandate);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(a.props.alert,Object(O.b)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(n){return e.apply(this,arguments)}}(),createOrUpdate:function(){var e=Object(c.a)(r.a.mark(function e(n,t){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.createOrUpdateBankAccount({update:function(e,n){var a=n.data;if(!t){var r,c=e.readQuery({query:z});e.writeQuery({data:{bankAccounts:Object(v.a)({},c?c.bankAccounts:{},{rows:(r=[a.createOrUpdateBankAccount]).concat.apply(r,Object(f.a)(c&&c.bankAccounts?c.bankAccounts.rows:[])),total:c&&c.bankAccounts?c.bankAccounts.total+1:1})},query:z})}},variables:{input:n,id:t}});case 3:return c=e.sent,Object(O.a)(a.props.alert,Object(O.b)(c.errors),[t?"bank.form.success_updated":"bank.form.success_add"]),e.abrupt("return",c.data&&c.data.createOrUpdateBankAccount);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(a.props.alert,Object(O.b)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(n,a){return e.apply(this,arguments)}}(),generateCode:function(){var e=Object(c.a)(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.generateCodeMandate({variables:{id:n}});case 3:return t=e.sent,e.abrupt("return",!t.errors);case 7:e.prev=7,e.t0=e.catch(0),Object(O.a)(a.props.alert,Object(O.b)(e.t0));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(n){return e.apply(this,arguments)}}(),removeBankAccount:function(){var e=Object(c.a)(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.removeBankAccount({variables:{id:n}});case 3:return t=e.sent,Object(O.a)(a.props.alert,Object(O.b)(t.errors),["bank.row.success_remove"]),e.abrupt("return",t.data&&t.data.removeBankAccount);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(a.props.alert,Object(O.b)(e.t0));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(n){return e.apply(this,arguments)}}(),removeMandate:function(){var e=Object(c.a)(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.removeMandate({variables:{id:n}});case 3:return t=e.sent,Object(O.a)(a.props.alert,Object(O.b)(t.errors),["bank.mandate.success_remove"]),e.abrupt("return",t.data&&t.data.removeMandate);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(a.props.alert,Object(O.b)(e.t0));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(n){return e.apply(this,arguments)}}(),sign:function(){var e=Object(c.a)(r.a.mark(function e(n,t){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.signedMandate({variables:{id:n,code:t}});case 3:return c=e.sent,Object(O.a)(a.props.alert,Object(O.b)(c.errors),["bank.mandate.success_sign"]),e.abrupt("return",c.data&&c.data.signedMandate);case 8:e.prev=8,e.t0=e.catch(0),Object(O.a)(a.props.alert,Object(O.b)(e.t0));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(n,a){return e.apply(this,arguments)}}()}},a}return Object(p.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this.props,n=e.dataBankAccounts,a=e.dataBankAccount;return u.createElement(o,{value:{bank:Object(v.a)({},this.state.bank,{bankAccount:a,bankAccounts:n})}},this.props.children)}}]),n}(u.PureComponent),L=Object(h.compose)(h.withApollo,k.b(),Object(h.graphql)(S,{name:"createOrUpdateBankAccount"}),Object(h.graphql)(T,{name:"createMandate"}),Object(h.graphql)(J,{name:"changeDefaultBankAccount"}),Object(h.graphql)(W,{name:"generateCodeMandate"}),Object(h.graphql)(G,{name:"signedMandate"}),Object(h.graphql)(Q,{name:"removeBankAccount"}),Object(h.graphql)(H,{name:"removeMandate"}),Object(h.graphql)(z,{props:function(e){return{dataBankAccounts:e.data}},skip:function(e){return!e.list}}),Object(h.graphql)(F,{options:function(e){return{variables:{id:e.id}}},props:function(e){return{dataBankAccount:e.data}},skip:function(e){return!e.id}}))(K);a.d(n,"b",function(){return L}),a.d(n,"a",function(){return i})}}]);
//# sourceMappingURL=40.137aadd3.chunk.js.map