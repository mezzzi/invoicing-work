(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1315:function(e,t,n){"use strict";n.r(t);n(166);var a=n(107),r=n(11),o=n.n(r),c=n(22),i=n(8),u=n(14),s=n(9),l=n(7),p=n(773),f=n(10),d=n(16),m=n(56),b=n(778),h=n(269),v=n(0),y=n(29),k=n(21),O=n(772),j=n(770),E=n(776),g=(n(97),n(50)),S=(n(131),n(43)),w=n(266),L=n(780),D=n(835),C=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={btnDisabled:!1,hasDocument:!1,proof:void 0,proofError:!1},n.handleProofChange=n.proofChange.bind(Object(d.a)(Object(d.a)(n))),n.handleSubmit=n.submit.bind(Object(d.a)(Object(d.a)(n))),n.handleLater=n.later.bind(Object(d.a)(Object(d.a)(n))),n.handleProofRemove=n.proofRemove.bind(Object(d.a)(Object(d.a)(n))),n.handleProofCancel=n.proofCancel.bind(Object(d.a)(Object(d.a)(n))),n.handleBur=n.blur.bind(Object(d.a)(Object(d.a)(n))),n}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=!1,a=e.beneficiary;return t.proof||a&&a.documents&&a.documents.rows&&a.documents.rows.map(function(e){e.documentStatus!==L.a.CANCELED&&18===e.documentTypeId&&(n=!0)}),{hasDocument:n}}}]),Object(u.a)(t,[{key:"blur",value:function(){var e=this.props,t=e.updateValues,n=e.form;t&&t(n.getFieldsValue())}},{key:"proofChange",value:function(e,t){this.setState({proof:e,proofBase64:t,proofError:!1})}},{key:"proofRemove",value:function(){this.setState({proof:void 0,proofBase64:void 0})}},{key:"proofCancel",value:function(e){this.props.onRemoveDocument&&this.props.onRemoveDocument(e)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.offValidateStep,n=e.offValidateLater;t&&t(this.handleSubmit),n&&n(this.handleLater)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.onValidateStep,n=e.onValidateLater;t&&t(this.handleSubmit),n&&n(this.handleLater)}},{key:"getBeneficiary",value:function(e){var t=this.state.proof,n={documents:[]};return t&&n.documents.push({documentTypeId:18,file:t,name:t&&t.name,userId:e.userId}),n}},{key:"later",value:function(){var e=this.props.form.getFieldsValue();this.props.onSave&&this.props.onSave(!1,this.getBeneficiary(e))}},{key:"submit",value:function(){var e=this,t=this.props.kycSetState;t({btnLoading:!0}),this.props.form.validateFields(function(){var n=Object(c.a)(o.a.mark(function n(a,r){var c;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a){n.next=10;break}if(c=e.state.hasDocument,e.state.proof||c){n.next=7;break}return t({btnLoading:!1}),e.setState({proofError:!0}),n.abrupt("return",!1);case 7:e.props.onSave&&e.props.onSave(!0,e.getBeneficiary(r)),n.next=11;break;case 10:t({btnLoading:!1});case 11:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.intl,r=e.className,o=e.beneficiary;return v.createElement(a.a,{method:"#",className:r,onSubmit:this.handleSubmit},v.createElement(g.a,{gutter:55},v.createElement(S.a,{span:12},v.createElement(D.a,{childrenAfter:!0,documents:o&&o.documents.rows,documentsType:[18],hasError:this.state.proofError,onChange:this.handleProofChange,onRemove:this.handleProofRemove,onCancel:this.handleProofCancel,title:"kyc.beneficiary.form_btn_upload_proof_power",errorText:"kyc.beneficiary.form_btn_upload_proof_power_error"},v.createElement(w.a,{onBlur:this.handleBur,id:"optin",label:v.createElement(k.b,{id:"kyc.beneficiary.power_checkbox"}),rules:[{message:n.formatMessage({id:"kyc.beneficiary.power_checkbox_error"}),required:!0}],form:t})))))}}]),t}(v.PureComponent),x=Object(y.compose)(a.a.create({}),k.e,E.b(),O.b())(C),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=n.submit.bind(Object(d.a)(Object(d.a)(n))),n.handleRemoveDocument=n.removeDocument.bind(Object(d.a)(Object(d.a)(n))),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"removeDocument",value:function(e){var t=this.props.removeDocument;t&&t(e)}},{key:"later",value:function(){var e=Object(c.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"submit",value:function(){var e=Object(c.a)(o.a.mark(function e(n,a){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.saveBeneficiary,n||Object(p.a)(Object(l.a)(t.prototype),"later",this).call(this),!r){e.next=5;break}return e.next=5,r(a);case 5:n&&this.save();case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this.props,t=e.currentStep,n=e.nextUrl,a=e.kycSetState,r=e.nextStep;a&&a({bottomBar:!0,btn:"kyc.bottom.confirm",btnLater:"kyc.bottom.later",btnLaterLink:"/",btnLink:n,nextStep:r,step:"".concat(t,"_PART_4")})}},{key:"render",value:function(){var e=this.props,n=e.tempBeneficiary,a=e.location,r=(e.baseUrl,e.values),o=a.pathname.replace(/\//g,".").replace(/-/g,"_").substr(1);return Object(p.a)(Object(l.a)(t.prototype),"_render",this).call(this,v.createElement("div",{className:"kyc-personal-info-3"},v.createElement("div",null,v.createElement(m.f,{titleVariables:{firstname:r.firstname||"",lastname:r.lastname||""},title:"".concat(o,"_title"),description:"".concat(o,"_description")})),v.createElement(x,{onRemoveDocument:this.handleRemoveDocument,onSave:this.handleSubmit,beneficiary:n})))}}]),t}(j.a);N.defaultProps={};t.default=Object(y.compose)(b.b(),a.a.create({}),h.c(),O.b(),E.b(),k.e)(N)},770:function(e,t,n){"use strict";var a=n(11),r=n.n(a),o=n(22),c=n(8),i=n(14),u=n(9),s=n(7),l=n(10),p=n(16),f=n(56),d=n(0),m=n(62),b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={},n.handleLater=n.later.bind(Object(p.a)(Object(p.a)(n))),n.handleSave=n.save.bind(Object(p.a)(Object(p.a)(n))),n.handleError=n.onError.bind(Object(p.a)(Object(p.a)(n))),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"load",value:function(){this.props.kycSetState&&this.props.kycSetState({btnLoading:!0})}},{key:"later",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.props.kyc.btnLaterLink)&&m.a.push(t),e.abrupt("return",!0);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onError",value:function(){var e=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.kycSetState&&this.props.kycSetState({btnLaterLoading:!1,btnLoading:!1});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t,n,a,o,c,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.company,a=t.kycSetState,o=t.kyc,c=o.nextStep,i=o.btnLink,a({btnLoading:!0}),!c||!n){e.next=5;break}return e.next=5,n.step(c);case 5:return a({btnLoading:!1}),i&&m.a.push(i),e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.offValidateStep,n=e.offValidateLater;t&&t(this.handleSave),n&&n(this.handleLater)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.onValidateStep,n=e.onValidateLater;t&&t(this.handleSave),n&&n(this.handleLater),this.props.kycSetState&&this.props.kycSetState(this.props.kycProps)}},{key:"_render",value:function(e){var t=this.props,n=t.kycProps,a=t.user,r=a&&a.data&&a.data.me,o=r&&r.currentCompany&&(r.currentCompany.name||r.currentCompany.brandName),c=n&&n.headingTitle,i=n&&n.headingDescription;return d.createElement("div",{className:"kyc-children"},c&&d.createElement("div",null,d.createElement(f.f,{titleVariables:{company:o},title:c,description:i})),e)}}]),t}(d.PureComponent);b.defaultProps={},t.a=b},773:function(e,t,n){"use strict";var a=n(7);function r(e,t,n){return(r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(a.a)(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}n.d(t,"a",function(){return r})},780:function(e,t,n){"use strict";var a,r;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),function(e){e.PENDING="PENDING",e.CANCELED="CANCELED",e.VALIDATED="VALIDATED"}(a||(a={})),function(e){e.M="M",e.MME="MME",e.MLLE="MLLE"}(r||(r={}))},792:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=792},805:function(e,t,n){},807:function(e,t,n){"use strict";var a=n(57),r=n(11),o=n.n(r),c=n(22),i=n(271),u=n(30),s=n(28),l=n(270),p=n(0),f=n(272),d=n(21),m=n(804),b=(n(808),p.useState);t.a=function(e){var t=e.onChange,n=e.onRemove,r=e.defaultPreview,h=e.hasError,v=e.errorText,y=e.title,k=b(void 0),O=Object(i.a)(k,2),j=O[0],E=O[1],g=b(r),S=Object(i.a)(g,2),w=S[0],L=S[1],D=function(){return{abort:function(){}}},C=function(){var e=Object(c.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(o.a.mark(function e(n){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).readAsDataURL(n),a.onloadend=function(){L(a.result),E(n),t&&t(n,a.result)};case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(c.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(t),e.abrupt("return",!1);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),P=function(){"undefined"!==typeof j&&n&&n(j.uid),L(void 0),E(void 0)};return p.createElement("div",{className:"local-upload-outer ".concat(h?" has-error":"")},p.createElement(f.a,{maxSize:1e7,accept:"image/jpeg, image/jpg, image/png, application/pdf, image/bmp, image/gif, image/png",onDrop:function(){},onDropAccepted:C},function(e){var t=e.getRootProps,n=e.isDragActive;return Object(a.a)(e,["getRootProps","isDragActive"]),p.createElement("div",Object.assign({},t({}),{className:"local-upload-wrapper active".concat(h?" has-error":"").concat(n?" upload-visible":"upload-hidden")}),w?p.createElement("div",{className:"local-upload-preview"},p.createElement(u.a,{onClick:P,className:"local-upload-preview-close",value:s.a.Cross}),p.createElement("div",{className:"preview-content"},w.indexOf("data:application/pdf;base64")>-1?p.createElement(m.a,{file:w}):p.createElement("img",{src:w}))):p.createElement(l.a,{active:!0,small:!0,multiple:!1,title:y,extension:"kyc.beneficiary.upload_extension",onCustomRequest:D,onBeforeUpload:N}))}),p.createElement("div",{className:"ant-form-explain"},h&&v&&p.createElement(d.b,{id:v})))}},808:function(e,t,n){},823:function(e,t){},824:function(e,t){},825:function(e,t){},826:function(e,t){},827:function(e,t){},835:function(e,t,n){"use strict";var a=n(57),r=n(8),o=n(14),c=n(9),i=n(7),u=n(10),s=n(30),l=n(28),p=n(807),f=n(780),d=n(0),m=(n(805),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hasError,n=e.documents,r=e.onCancel,o=e.documentsType,c=e.children,i=e.childrenAfter,u=Object(a.a)(e,["hasError","documents","onCancel","documentsType","children","childrenAfter"]),m=[];return n&&n.map(function(e,t){o&&e.documentTypeId&&e.documentStatus!==f.a.CANCELED&&o.indexOf(e.documentTypeId)>-1&&m.push(e)}),d.createElement("div",{className:"proof-outer ".concat(t?" has-error":"")},m.map(function(e,t){return d.createElement("div",{className:"document-proof",key:"".concat(t)},e.documentStatus===f.a.PENDING&&d.createElement(s.a,{value:l.a.Clock}),e.documentStatus===f.a.VALIDATED&&d.createElement(s.a,{value:l.a.Checkmark}),e.fileName,d.createElement("div",{onClick:r&&r.bind(null,e.documentId),className:"document-proof-remove"},d.createElement(s.a,{value:l.a.Cross})))}),!m||0===m.length&&d.createElement(d.Fragment,null,!i&&c,d.createElement(p.a,Object.assign({hasError:t},u)),i&&c))}}]),t}(d.PureComponent));m.defaultProps={},t.a=m}}]);
//# sourceMappingURL=17.b3107bea.chunk.js.map