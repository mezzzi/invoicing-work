(window.webpackJsonp=window.webpackJsonp||[]).push([[10,97],{701:function(e,t,a){var n=a(0);function c(e){return n.createElement("svg",e,[n.createElement("defs",{key:0},n.createElement("path",{d:"M14.6804348,4.40652169 C11.5206522,4.40652169 8.95217389,7.01195649 8.95217389,10.1902174 C8.95217389,11.5391304 9.41413042,12.7586957 10.1717391,13.7565217 L4.73913039,19.2630435 C4.42499995,19.5956522 4.42499995,20.1130435 4.73913039,20.427174 C4.90543474,20.5934783 5.10869561,20.6673914 5.31195648,20.6673914 C5.53369561,20.6673914 5.73695648,20.5934783 5.90326083,20.427174 L11.3358696,14.9206522 C12.2782609,15.6043478 13.423913,15.9923913 14.6619565,15.9923913 C17.8217392,15.9923913 20.3902174,13.3869565 20.3902174,10.2086956 C20.3902174,7.03043475 17.8402174,4.40652169 14.6804348,4.40652169 Z M14.6804348,14.5326087 C12.3336957,14.5326087 10.4304348,12.5923913 10.4304348,10.2086956 C10.4304348,7.82499997 12.3336957,5.88478257 14.6804348,5.88478257 C17.0271739,5.88478257 18.9304348,7.82499997 18.9304348,10.2086956 C18.9304348,12.5923913 17.0271739,14.5326087 14.6804348,14.5326087 Z M17.5445652,10.2826087 C17.5076087,10.5967391 17.2304348,10.8369565 16.9163044,10.8369565 C16.8793479,10.8369565 16.8608696,10.8369565 16.8239131,10.8369565 C16.4728261,10.7815217 16.2326087,10.4673913 16.2695652,10.1163043 C16.3989131,9.15543476 15.3271739,8.65652172 15.2717391,8.63804346 C14.9576087,8.49021737 14.8097826,8.10217389 14.9576087,7.78804345 C15.1054348,7.47391301 15.475,7.32608693 15.8076087,7.45543475 C15.8815218,7.47391301 17.8032609,8.36086954 17.5445652,10.2826087 Z M16.1956522,11.6869565 C16.325,11.8163043 16.4173913,12.0195652 16.4173913,12.2043478 C16.4173913,12.4076087 16.3434783,12.5923913 16.1956522,12.7217391 C16.0663044,12.851087 15.8630435,12.9434783 15.6782609,12.9434783 C15.4934783,12.9434783 15.2902174,12.8695652 15.1608696,12.7217391 C15.0315218,12.5923913 14.9391304,12.3891304 14.9391304,12.2043478 C14.9391304,12.0195652 15.0130435,11.8163043 15.1608696,11.6869565 C15.2902174,11.5576087 15.4934783,11.4652174 15.6782609,11.4652174 C15.8630435,11.4652174 16.0478261,11.5391304 16.1956522,11.6869565 Z",id:"search-1"})),n.createElement("g",{id:"Mon-r\xe9seau",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:1},n.createElement("g",{id:"05_01_Mon-r\xe9seau_Add_Company",transform:"translate(-459.000000, -159.000000)"},n.createElement("g",{id:"Popin",transform:"translate(440.000000, 139.000000)"},n.createElement("g",{id:"Icons/search",transform:"translate(15.000000, 16.000000)"},[n.createElement("mask",{id:"mask-search-2",fill:"white",key:0},n.createElement("use",{xlinkHref:"#search-1"})),n.createElement("use",{id:"search",fill:"currentColor",fillRule:"nonzero",xlinkHref:"#search-1",key:1})]))))])}c.defaultProps={width:"17px",height:"17px",viewBox:"0 0 17 17",version:"1.1"},e.exports=c,c.default=c},795:function(e,t,a){"use strict";var n=a(11),c=a.n(n),r=a(22),s=a(8),o=a(14),i=a(9),l=a(7),u=a(10),d=(a(798),a(38),a(800),a(20)),h=a(0),p=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return h.createElement(d.a,{className:"loading",type:"loading",style:{fontSize:24},spin:!0})}}]),t}(h.PureComponent),m=a(21),f=(a(802),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1},a.more=function(){var e=Object(r.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.hasMore){e.next=7;break}if(a.setState({loading:!0}),!a.props.loadMore){e.next=6;break}return e.next=6,a.props.loadMore(t);case 6:a.setState({loading:!1});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleRef=function(e){e&&(a.scrollRef=e,a.scrollRef.addEventListener("scroll",function(e){!a.state.loading&&a.scrollRef&&a.scrollRef.offsetHeight+a.scrollRef.scrollTop>=a.scrollRef.scrollHeight&&a.more()}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.hasMore,n=e.useWindow,c=this.state.loading;return t&&h.createElement("div",{ref:this.handleRef,className:"infinity".concat(!1===n?"":" use-window")},t,a&&c?h.createElement(p,{key:"loading"}):null)}}]),t}(h.PureComponent));f.defaultProps={};t.a=Object(m.e)(f)},796:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return c});var n,c,r=a(234),s=a(24);!function(e){e.unknown="UNKNOW",e.exist="EXIST",e.already="ALREADY",e.self="SELF"}(n||(n={})),function(e){e.CONTRACT_SIGNED="CONTRACT_SIGNED",e.BENEFICIARIES_ADDED="BENEFICIARIES_ADDED",e.BENEFICIARIES_VALIDATED="BENEFICIARIES_VALIDATED",e.PENDING="PENDING",e.SUMMARY="SUMMARY",e.VALIDATED="VALIDATED",e.REFUSED="REFUSED"}(c||(c={}));var o;Object.keys(c).reduce(function(e,t,a){return Object(s.a)({},e,Object(r.a)({},t,a))},{});!function(e){e.createdAt_ASC="createdAt_ASC",e.createdAt_DESC="createdAt_DESC",e.updatedAt_ASC="updatedAt_ASC",e.updatedAt_DESC="updatedAt_DESC"}(o||(o={}))},798:function(e,t,a){},800:function(e,t,a){},802:function(e,t,a){},822:function(e,t,a){"use strict";var n=a(57),c=a(11),r=a.n(c),s=a(44),o=a(24),i=a(22),l=a(8),u=a(14),d=a(9),h=a(7),p=a(10),m=a(16),f=a(829),b=a(815),v=a(52),E=a(0),C=a(21),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={typing:!1,value:""},a.more=function(){var e=Object(i.a)(r.a.mark(function e(t,a,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,t({updateQuery:function(e,t){var a=t.fetchMoreResult;return a.searchCompanies?Object(o.a)({},e,{searchCompanies:Object(o.a)({},e.searchCompanies,{rows:[].concat(Object(s.a)(e.searchCompanies.rows),Object(s.a)(a.searchCompanies.rows))})}):e},variables:{limit:10,offset:n||0}});case 3:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.handleChange=a.change.bind(Object(m.a)(Object(m.a)(a))),a.handleSearch=a.search.bind(Object(m.a)(Object(m.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"change",value:function(e){var t=this.props.onValueChange;t&&t(e),this.setState({typing:!0})}},{key:"search",value:function(e){this.setState({value:e,typing:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.onSelect,c=t.type,r=t.form,s=this.props,o=(s.onValueChange,Object(n.a)(s,["onValueChange"])),i=this.state,l=i.value,u=i.typing;return E.createElement(b.b,{value:l,limit:10,offset:0},E.createElement(b.a,null,function(t){var n,s,i,l,d,h=t.siren;return u||(n=h&&h.data&&h.data.searchCompanies&&h.data.searchCompanies.rows?h.data.searchCompanies.rows:[],s=h&&h.data&&h.data.searchCompanies&&h.data.searchCompanies.total,d=h&&h.data&&h.data.fetchMore,i=h&&h.data&&h.data.loading,l=!!(n&&n.length&&s)&&n.length<s),E.createElement(f.a,Object.assign({placeholder:e.props.placeholder,hasMore:l,rows:i?void 0:n,form:r,onSearch:e.handleSearch,loadMore:e.more.bind(null,d,s,n&&n.length),type:c,onSelect:a,onValueChange:e.handleChange},o))}))}}]),t}(E.PureComponent);t.a=Object(C.e)(v.b()(y))},829:function(e,t,a){"use strict";a(888),a(329);var n=a(268),c=a(8),r=a(14),s=a(9),o=a(7),i=a(10),l=a(16),u=a(199),d=a(88),h=a(266),p=a(35),m=a(795),f=a(796),b=a(0),v=a(21),E=a(30),C=a(28),y=function(){return b.createElement("div",{className:"option-not-found"},b.createElement(E.a,{value:C.a.EmptySearch}),b.createElement("p",{className:"not-found-title"},b.createElement(v.b,{id:"search.company.search_not_found"})),b.createElement("p",{className:"not-found-description"},b.createElement(v.b,{id:"search.company.no_data"})))},O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={open:!1,value:""},a.handleClickOutside=a.clickOutside.bind(Object(l.a)(Object(l.a)(a))),a.handleClickFooter=a.clickFooter.bind(Object(l.a)(Object(l.a)(a))),a.handleSetWrapperRef=a.setWrapperRef.bind(Object(l.a)(Object(l.a)(a))),a.handleSearch=a.search.bind(Object(l.a)(Object(l.a)(a))),a.handleChange=a.change.bind(Object(l.a)(Object(l.a)(a))),a.handleFocus=a.focus.bind(Object(l.a)(Object(l.a)(a))),a.handleBlur=a.blur.bind(Object(l.a)(Object(l.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"setWrapperRef",value:function(e){e&&(this.wrapperRef=e)}},{key:"clickOutside",value:function(e){var t=e.target;return t&&this.wrapperRef&&!this.wrapperRef.contains(t)&&(this.props.onLeave&&this.props.onLeave(),this.setState({open:!1})),!0}},{key:"clickFooter",value:function(){this.setState({open:!1,value:""})}},{key:"blur",value:function(e){this.props.onBlur&&this.props.onBlur()}},{key:"focus",value:function(e){this.props.onFocus&&this.props.onFocus(),this.setState({open:!0})}},{key:"search",value:function(e){var t=this.props.onSearch;this.setState({value:e}),t&&t(e)}},{key:"change",value:function(e){var t=this.props.onValueChange,a=e.currentTarget;t&&t(a.value)}},{key:"select",value:function(e){var t=this.props.onSelect,a={addresses:e.addresses&&e.addresses.rows?e.addresses.rows.map(function(e){return{address1:e.address1,address2:e.address2,city:e.city,country:e.country,siret:e.siret,zipcode:e.zipcode}}):[],brandName:e.brandName,capital:e.capital,category:e.category,domainName:e.domainName,incorporationAt:e.incorporationAt,legalForm:e.legalForm,naf:e.naf,nafNorm:e.nafNorm,name:e.name,numberEmployees:e.numberEmployees,phone:e.phone,siren:e.siren,siret:e.siret,slogan:e.slogan,vatNumber:e.vatNumber};t&&t(a),this.setState({open:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){this.wrapperRef=void 0,document.addEventListener("click",this.handleClickOutside);var e=this.props.onSearch;this.setState({value:""}),e&&e("")}},{key:"renderButton",value:function(e,t){var a=b.createElement(d.c,{onClick:this.select.bind(this,e),type:d.b.Default},b.createElement(v.b,{id:"search.company.btn_add"}));if("invoices"===t)return b.createElement(d.c,{onClick:this.select.bind(this,e),type:d.b.Default},e.status===f.a.already?b.createElement(v.b,{id:"search.company.btn_invoice_choose"}):b.createElement(v.b,{id:"search.company.btn_invoice_add"}));switch(e.status){case f.a.self:"companies"!==t&&"partners"!==t||(a=b.createElement(d.c,{disabled:!0},b.createElement(v.b,{id:"search.company.btn_self"})));break;case f.a.already:a="partners"===t?b.createElement(d.c,{disabled:!0},b.createElement(v.b,{id:"search.company.btn_already"})):b.createElement(d.c,{disabled:!0},b.createElement(v.b,{id:"search.company.btn_exist"}));break;case f.a.exist:"companies"===t&&(a=b.createElement(d.c,{disabled:!0},b.createElement(v.b,{id:"search.company.btn_exist"})));break;case f.a.unknown:a=b.createElement(d.c,{onClick:this.select.bind(this,e),type:d.b.Default},b.createElement(v.b,{id:"search.company.btn_add"}))}return a}},{key:"renderSearch",value:function(){var e=this,t=this.props,a=t.type,c=t.rows,r=t.loading,s=t.hasMore,o=t.loadMore,i=t.footer,l=this.state,d=l.open,h=l.value,p=[];return!r&&c&&c.length>0?p=c.map(function(t,c){var r=null;if(t.addresses&&t.addresses.rows&&t.addresses.rows[0]){var s=t.addresses.rows[0];r="".concat(s.address1?"".concat(s.address1," "):"").concat(s.zipcode?"".concat(s.zipcode," "):"").concat(s.city?"".concat(s.city," "):"").concat(s.country?"".concat(s.country):"")}return b.createElement("div",{className:"search-result-item",key:"".concat(c)},b.createElement("div",{className:"option-avatar"},b.createElement(u.a,{company:t})),b.createElement("div",{className:"option-info"},b.createElement("div",{className:"company-title"},t.name||t.brandName),r&&b.createElement("div",{className:"company-address"},r),b.createElement("div",{className:"company-siret"},b.createElement(v.b,{id:"search.company.siret"}),": ",t.siret),b.createElement("div",null,t.status===f.a.already&&b.createElement(n.a,{style:{marginTop:5}},b.createElement(v.b,{id:"search.company.tag_partner"})))),b.createElement("div",{className:"option-cta"},e.renderButton(t,a)))}):!r&&c&&0===c.length&&h&&h.length>0&&(p=[b.createElement("div",{key:"0",className:"search-result-item"},b.createElement(y,null))]),p.length>0&&d&&b.createElement("div",{className:"search-result-outer"},b.createElement("div",{className:"search-result"},b.createElement(m.a,{hasMore:s,loadMore:o,useWindow:!1},p)),i&&b.createElement("div",{onClick:this.handleClickFooter,className:"search-result-footer"},i))}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.rules,n=e.intl,c=e.type,r=e.inline;return b.createElement("div",{ref:this.handleSetWrapperRef,className:"search-autocomplete ".concat(c)},b.createElement(h.j,{rules:a,form:t,type:p.a.Search,onSearch:this.handleSearch,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus,enterButton:n.formatMessage({id:"search.company.btn_search"}),className:"input-autocomplete",autoComplete:"off",placeholder:!r&&this.props.placeholder?n.formatMessage({id:this.props.placeholder}):void 0,label:r&&this.props.placeholder?n.formatMessage({id:this.props.placeholder}):null},this.renderSearch()))}}]),t}(b.PureComponent),k=Object(v.e)(O),j=a(44),S=a(701),g=a.n(S),w=a(904),N=g.a,R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={contacts:[],newContact:!1,open:!1,value:""},a.handleClickOutside=a.clickOutside.bind(Object(l.a)(Object(l.a)(a))),a.handleShowContactSearch=a.showContactSearch.bind(Object(l.a)(Object(l.a)(a))),a.handleAddContact=a.addContact.bind(Object(l.a)(Object(l.a)(a))),a.handleCancelContact=a.cancelContact.bind(Object(l.a)(Object(l.a)(a))),a.handleSetWrapperRef=a.setWrapperRef.bind(Object(l.a)(Object(l.a)(a))),a.handleSearch=a.search.bind(Object(l.a)(Object(l.a)(a))),a.handleRemove=a.remove.bind(Object(l.a)(Object(l.a)(a))),a.handleChange=a.change.bind(Object(l.a)(Object(l.a)(a))),a.handleFocus=a.focus.bind(Object(l.a)(Object(l.a)(a))),a.handleBlur=a.blur.bind(Object(l.a)(Object(l.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"setWrapperRef",value:function(e){e&&(this.wrapperRef=e)}},{key:"showContactSearch",value:function(){this.setState({newContact:!0})}},{key:"addContact",value:function(e){this.setState({contacts:[].concat(Object(j.a)(this.state.contacts),[e]),newContact:!1})}},{key:"cancelContact",value:function(){this.setState({newContact:!1})}},{key:"clickOutside",value:function(e){var t=e.target;return t&&this.wrapperRef&&!this.wrapperRef.contains(t)&&(this.props.onLeave&&this.props.onLeave(),this.setState({open:!1})),!0}},{key:"remove",value:function(e){var t=[];this.state.contacts.map(function(a){e.id!==a.id&&t.push(a)}),this.setState({contacts:t})}},{key:"blur",value:function(e){this.props.onBlur&&this.props.onBlur()}},{key:"focus",value:function(e){this.props.onFocus&&this.props.onFocus(),this.setState({open:!0})}},{key:"search",value:function(e){}},{key:"change",value:function(e){var t=this.props.onValueChange,a=e.currentTarget;this.setState({value:a.value}),t&&t(a.value)}},{key:"select",value:function(e){var t=this.props.onSelect;this.setState({contacts:[].concat(Object(j.a)(this.state.contacts),[e])}),t&&t(e),this.setState({open:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){this.wrapperRef=void 0,document.addEventListener("click",this.handleClickOutside);var e=this.props.onSearch;this.setState({value:""}),e&&e("")}},{key:"renderSearch",value:function(){var e=this,t=this.props,a=t.rows,n=(t.form,t.intl,this.state),c=n.open,r=n.value;if(c){var s=[];return a&&a.length>0&&a.map(function(t,a){s.concat(t.emails&&t.emails.rows.map(function(n,c){var o="".concat(t.firstname," ").concat(t.lastname);(new RegExp(r).test(n.email)||new RegExp(r).test(o))&&s.push(b.createElement("div",{key:"".concat(a,"-").concat(c),onClick:e.select.bind(e,t),className:"search-result-item small"},b.createElement("div",{className:"contact-title"},o),b.createElement("div",{className:"contact-email"}," <",n.email,">")))}))}),b.createElement("div",{className:"search-result"},s)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,c=t.rules,r=t.intl,s=t.type,o=t.inline,i=t.onSubmit,l=t.refetchPartner,u=t.companyId,m=this.state,f=m.contacts,y=m.newContact,O=f.map(function(e){return"".concat(e.id)});return b.createElement("div",{ref:this.handleSetWrapperRef,className:"search-autocomplete ".concat(s," search-autocomplete-").concat(o?"inline":"floating")},b.createElement("div",{className:"select-contact-title"},b.createElement(v.b,{id:"purchase.pay.notification"})),f&&f.length>0&&b.createElement("div",{className:"contacts-tag"},f.map(function(t,a){return b.createElement(n.a,{onClick:e.handleRemove.bind(null,t),key:"".concat(a)},t.firstname,b.createElement(E.a,{value:C.a.Cross}))})),b.createElement("div",{className:"autocomplete-contacts"},b.createElement(h.j,{rules:c,form:a,type:p.a.Search,onSearch:this.handleSearch,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus,className:"input-autocomplete",prefix:!o&&b.createElement(N,{color:"#0053FA",className:"search-icon"}),autoComplete:"off",placeholder:o?void 0:r.formatMessage({id:"invoice.contact.contact_placeholder"}),label:o?r.formatMessage({id:"invoice.contact.contact_placeholder"}):null},b.createElement("div",{onClick:this.handleShowContactSearch,className:"add-contact"},b.createElement(E.a,{value:C.a.Plus}),b.createElement(v.b,{id:"invoice.contact.contact_add"})),this.renderSearch())),y?b.createElement(b.Fragment,null,b.createElement("div",{className:"select-contact-title"},b.createElement(v.b,{id:"partners.contact.form_add_title"})),b.createElement(w.b,{companyId:u,refetchPartner:l,onSubmit:this.handleAddContact,onCancel:this.handleCancelContact})):b.createElement("div",{className:"contact-actions"},b.createElement(d.c,{type:d.b.Primary,onClick:i&&i.bind(null,O)},b.createElement(v.b,{id:"partners.contact.submit"}))))}}]),t}(b.PureComponent),A=Object(v.e)(R),_=a(822);a.d(t,"a",function(){return k}),a.d(t,"b",function(){return A}),a.d(t,"c",function(){return _.a})},888:function(e,t,a){}}]);
//# sourceMappingURL=10.fa5e4d21.chunk.js.map